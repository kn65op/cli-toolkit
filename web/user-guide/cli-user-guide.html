<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>CLI toolkit user guide</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1">
<script type="text/javascript" src="../jquery-1.6.4.js"></script>
<link type="text/css" rel="stylesheet" href="../jquery-ui-1.8.16.custom/css/smoothness/jquery-ui-1.8.16.custom.css">
<script type="text/javascript" src="../jquery-ui-1.8.16.custom/js/jquery-ui-1.8.16.custom.min.js"></script>
<link type="text/css" rel="stylesheet" href="../blackbirdjs-1.0/blackbird-lite.css">
<script type="text/javascript" src="../blackbirdjs-1.0/blackbird.js"></script>
<script type="text/javascript" src="../cli-traces.js"></script>
<script type="text/javascript" src="../xml-node.js"></script>
<script type="text/javascript" src="../dynamic-menu.js"></script>
<script type="text/javascript" src="../dynamic-dialog.js"></script>
<link type="text/css" rel="stylesheet" href="cli-user-guide.css">
<script type="text/javascript" src="cli-user-guide.js"></script>    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20981143-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</head><body onload="onLoad();" onscroll="onScroll();"  bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article"><div class="titlepage"><div><div><h1 class="title"><a name="idp2848"></a>CLI library user guide</h1></div><div><div class="author"><h3 class="author"><span class="firstname">Royer</span> <span class="surname">Alexis</span></h3></div></div><div><p class="pubdate">Jul, 15th 2013</p></div><div><div class="revhistory"><table style="border-style:solid; width:100%;" summary="Revision History"><tr><th align="left" valign="top" colspan="2"><b>Revision History</b></th></tr><tr><td align="left">Revision 2.8</td><td align="left">July, 15th 2013</td></tr><tr><td align="left" colspan="2">
            <div class="variablelist"><dl class="variablelist"><dt><span class="term">New features:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">Execution contexts</a>,
                                        (<a class="link" href="#adv.telnet" title="6.1. Telnet">Telnet</a> section revision consequently),</li><li class="listitem">python tools for <a class="link" href="#xslt" title="3.1. Transformation">Transformation</a>
                                        and <a class="link" href="#xmlres.cli2help" title="4.9. Automatic documentation generation">Automatic documentation generation</a>.</li></ul></div></dd><dt><span class="term">New examples, figures &amp; FAQ:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Examples:
                                        <a class="link" href="#eg.non-blocking-ui" title="Example 36. Non blocking execution and UI controls">Non blocking execution and UI controls</a>,
                                        <a class="link" href="#eg.exec-ctx.pwd-shell" title="Example 37. PwdShellContext execution context"><code class="classname">PwdShellContext</code> execution context</a>,</li><li class="listitem">Figures:
                                        <a class="link" href="#fig.ui.classes">UI controls: class hierarchy</a>,
                                        <a class="link" href="#fig.exec-ctx.blocking-call">Execution contexts: blocking call execution flow chart</a>,
                                        <a class="link" href="#fig.exec-ctx.non-blocking-call">Execution contexts: non blocking call execution flow chart</a>,</li><li class="listitem">FAQ:
                                        <a class="link" href="#faq.Q020" title="7.1. I need to repeat a same set of commands. How can I do?">Q020</a>,
                                        <a class="link" href="#faq.Q050" title="7.2. Why the Shell doesn't come with a timeout for automatic log off?">Q050</a>,
                                        <a class="link" href="#faq.Q350" title="7.6. I get a 'curses.h : No such file or directory' while compiling ncurses_console.cpp!">Q350</a>,
                                        <a class="link" href="#faq.Q650" title="7.9. The Java integration sample gets stuck when executed under cygwin!">Q650</a>.</li></ul></div></dd><dt><span class="term">Improvements:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#build" title="2.3. Build">Build</a> and <a class="link" href="#howto" title="3. How to use it">How to use it</a> details,
                                        plus <span class="command"><strong>make check</strong></span> addition,</li><li class="listitem">list of required utilities addition in <a class="link" href="#prerequisite" title="2.2. Prerequisite">Prerequisite</a> section,</li><li class="listitem">pragma code correction in FAQ <a class="link" href="#faq.Q400" title="7.7. CLI auto-generated source files cause thousands of compilation warnings!">Q400</a>,</li><li class="listitem">"UI package" renamed into <a class="link" href="#ui" title="5. UI controls">UI controls</a>,</li><li class="listitem"><a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">Non blocking execution</a>
                                        motivation and UI controls management addition,</li><li class="listitem">numbers and named anchor for all figures and tables,</li><li class="listitem">dynamic menus and mobile device compatibility.</li></ul></div></dd><dt><span class="term">Deprecations:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#adv.quit" title="6.7. Thread-safe termination (deprecated)"><code class="classname">Shell</code> thread-safe termination</a>,</li><li class="listitem"><code class="function">NonBlockingIODevice::WaitForKeys</code> due to <a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">execution contexts</a> improvements.</li></ul></div></dd></dl></div>
        </td></tr><tr><td align="left">Revision 2.7</td><td align="left">Dec, 7th 2011</td></tr><tr><td align="left" colspan="2">
            <div class="variablelist"><dl class="variablelist"><dt><span class="term">New sections:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#ui" title="5. UI controls">UI package</a>,</li><li class="listitem"><a class="link" href="#adv.telnet" title="6.1. Telnet">Telnet</a>,</li><li class="listitem">"Mono-thread execution" renamed into <a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">Non blocking execution</a>,</li><li class="listitem"><a class="link" href="#adv.iodevices" title="6.5. Define your own input/output device">Define your own input/output device</a> split in two sub-sections,</li><li class="listitem"><a class="link" href="#adv.pch" title="6.11. Pre-compiled headers">Pre-compiled headers</a>,</li><li class="listitem"><a class="link" href="#faq" title="7. Frequently Asked Questions">Frequently Asked Questions</a>.</li></ul></div></dd><dt><span class="term">New examples:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#eg.non-blocking" title="Example 35. Non blocking execution">Non blocking execution</a>,</li><li class="listitem"><a class="link" href="#ui" title="5. UI controls">UI Package</a> section examples.</li></ul></div></dd><dt><span class="term">New tables:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#table.OutputDevice" title="Table 2. Output device handlers">Output device handlers</a>,</li><li class="listitem"><a class="link" href="#table.IODevice" title="Table 3. Input device handlers">Input device handlers</a>,</li><li class="listitem"><a class="link" href="#table.NonBlockingIODevice" title="Table 4. Non blocking device handlers">Non blocking device handlers</a>.</li></ul></div></dd><dt><span class="term">Other additions:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="function">Shell::CleanScreen</code>.</li></ul></div></dd><dt><span class="term">Improvements:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Dynamic menus implementation (including table of content, example list, figure list, table list, change list),</li><li class="listitem">dynamic notes and tips,</li><li class="listitem">example titles improvement,</li><li class="listitem">numbers and named anchor for all titles and examples.</li></ul></div></dd><dt><span class="term">Deprecations:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">"C++ integration - static instantiation + @cpp attribute" example.</li></ul></div></dd></dl></div>
        </td></tr><tr><td align="left">Revision 2.6</td><td align="left">Dec, 15th 2010</td></tr><tr><td align="left" colspan="2">
            <div class="variablelist"><dl class="variablelist"><dt><span class="term">Deprecations:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="function">Shell::SetErrorFormatting</code> / <code class="function">Shell.setErrorFormatting</code>.</li></ul></div></dd><dt><span class="term">Additions:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="function">Shell::GetCurrentMenu</code> / <code class="function">Shell.getCurrentMenu</code>.</li></ul></div></dd></dl></div>
        </td></tr><tr><td align="left">Revision 2.5</td><td align="left">Sep, 8th 2010</td></tr><tr><td align="left" colspan="2">
            <div class="variablelist"><dl class="variablelist"><dt><span class="term">New features:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#xmlres.schema" title="4.8. Schema checking">schemas</a>,</li><li class="listitem"><a class="link" href="#xmlres.native" title="4.4. cpp, java - Insert target language directly in the resource file">"member" and "constructor" sections</a>,</li><li class="listitem"><a class="link" href="#adv.menus.handlers" title="6.2.1. handler - menu elements special features">"prompt" handler</a>,</li><li class="listitem"><a class="link" href="#xmlres.cli2help" title="4.9. Automatic documentation generation">automatic help document generation</a>.</li></ul></div></dd><dt><span class="term">New sections:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#adv.menus" title="6.2. Advanced menu management">Advanced menu management</a>,</li><li class="listitem"><a class="link" href="#adv.shellfeatures" title="6.3. Shell advanced features"><code class="classname">Shell</code> advanced features</a>.</li></ul></div></dd><dt><span class="term">Improvements:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#eg.tag.a-b-plus" title="Example 17. Syntax tags - (a|b)+ patterns">(a|b)+</a> and <a class="link" href="#eg.tag.a-b-star" title="Example 16. Syntax tags - (a|b)* patterns">(a|b)*</a> samples.</li></ul></div></dd></dl></div>
        </td></tr><tr><td align="left">Revision 2.4</td><td align="left">Oct, 1st 2009</td></tr><tr><td align="left" colspan="2">Minor corrections according to miscellaneous changes.</td></tr><tr><td align="left">Revision 2.3</td><td align="left">May, 14th 2009</td></tr><tr><td align="left" colspan="2">
            <div class="variablelist"><dl class="variablelist"><dt><span class="term">New features:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#adv.quit" title="6.7. Thread-safe termination (deprecated)">Thread-safe termination</a>,</li><li class="listitem"><a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">Mono-Thread execution</a>.</li></ul></div></dd><dt><span class="term">New sections:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#adv.dimension" title="6.10. Embedded integration and memory management">Embedded integration and memory management</a>,</li><li class="listitem"><a class="link" href="#adv.compilers" title="6.12. Making compilers">Making compilers</a>.</li></ul></div></dd><dt><span class="term">Improvements:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="#adv.iodevices" title="6.5. Define your own input/output device">Define your own input/output device</a>,</li><li class="listitem"><a class="link" href="#xslt" title="3.1. Transformation">XSL generation</a> note addition.</li></ul></div></dd></dl></div>
        </td></tr><tr><td align="left">Revision 2.2</td><td align="left">Sep, 21st 2008</td></tr><tr><td align="left" colspan="2">Minor corrections according bug fixes and miscellaneous changes.</td></tr><tr><td align="left">Revision 2.1</td><td align="left">Oct, 31st 2007</td></tr><tr><td align="left" colspan="2">
            <div class="variablelist"><dl class="variablelist"><dt><span class="term">New features:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Java addition,</li><li class="listitem">French language support.</li></ul></div></dd><dt><span class="term">Improvements:</span></dt><dd>Minor corrections.</dd></dl></div>
        </td></tr><tr><td align="left">Revision 2.0</td><td align="left">Sep, 27th 2007</td></tr><tr><td align="left" colspan="2">License modification: minor changes.</td></tr><tr><td align="left">Revision 1.0</td><td align="left">June, 1st 2006</td></tr><tr><td align="left" colspan="2">First release of the user guide.</td></tr></table></div></div></div><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="intro"></a>1. Introduction</h2></div></div></div><p>
    CLI is a library and a set of tools
    that allow you to easily develop text-based user interfaces.
    So far, what you have to do is:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Writing an XML resource file;</li><li class="listitem">Transforming it using the tools of the library;</li><li class="listitem">Plugging it into an existing program.</li></ol></div><p>
    These points are discussed in the <a class="link" href="#howto" title="3. How to use it">How to use it</a> section.
    </p><p>
    The <a class="link" href="#xmlres" title="4. XML resource file">XML resource file</a> section is a reference manual for XML resource files syntax,
    and the <a class="link" href="#ui" title="5. UI controls">UI controls</a> section describes additional classes that help interacting with the user.
    </p><p>
    Eventually the <a class="link" href="#adv" title="6. Advanced">Advanced</a> section gives advanced information for users having specific needs.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install"></a>2. Installation</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="download"></a>2.1. Download</h3></div></div></div><p>
        The CLI library can be downloaded from
        <a class="ulink" href="http://alexis.royer.free.fr/CLI/index.html#download" target="_top">here</a>
        in the form of gzipped archives.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="prerequisite"></a>2.2. Prerequisite</h3></div></div></div><p>
        Regular Linux installs usually have everything needed to have the CLI library compile.
        If you compile on Windows, you may install cygwin.
        </p><p>
        Here is a list of required utilities:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">make</li><li class="listitem">xsltproc</li><li class="listitem">dos2unix and unix2dos</li><li class="listitem">g++</li><li class="listitem">ncurses devel (Linux only)</li></ul></div><p>
        Plus, for Java users:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">JDK (optional)</li></ul></div><p>
        </p><p>
        Plus, optionally, for unit tests (<span class="command"><strong>make check</strong></span>):
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">xmllint (optional)</li><li class="listitem">gawk (optional)</li><li class="listitem">python and pylint (optional)</li></ul></div><p>
        or documentation generation (<span class="command"><strong>make doc</strong></span>):
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">doxygen (optional)</li><li class="listitem">docbook_xsl (optional)</li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="build"></a>2.3. Build</h3></div></div></div><p>
        Once you have downloaded the archive, unpack it on your disk:
        </p><pre class="programlisting">tar xvfz cli-X.Y.tgz</pre><p>
        and declare a <code class="varname">CLI_DIR</code> environment variable that points to directory just extracted:
        </p><pre class="programlisting">export CLI_DIR=$(pwd)/cli-X.Y</pre><p>
        </p><p>
        Optionally, set the <code class="varname">JAVA_HOME</code> environment variable:
            </p><pre class="programlisting">export JAVA_HOME="$(dirname "$(dirname "$(which javac)")")"</pre><p>
        </p><p>
        Go to <code class="filename">build/make</code>:
            </p><pre class="programlisting">cd ${CLI_DIR}/build/make</pre><p>
        and build:
            </p><pre class="programlisting">make</pre><p>
        or (debug version):
            </p><pre class="programlisting">make _DEBUG=</pre><p>
        This compilation will run over C++ and Java (depending on <code class="varname">JAVA_HOME</code> value) library compilations.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            You may also execute the library unit tests with the following command:
                <pre class="programlisting">make check</pre>
            or:
                <pre class="programlisting">make _DEBUG= check</pre></div><p>
        Output libraries go in the following directories:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">C++:<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">directory: <code class="filename">${CLI_DIR}/cpp/build/make/${TARGET}${CXX}/${RDX}</code>,</li><li class="listitem">file: <code class="filename">${STATIC_LIB_PREFIX}clicpp${STATIC_LIB_SUFFIX}</code>,</li></ul></div></li><li class="listitem">Java:<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">directory: <code class="filename">${CLI_DIR}/java/build/make/${RDX}</code>,</li><li class="listitem">files: <code class="filename">cli.jar</code> and <code class="filename">${DYN_LIB_PREFIX}cli${DYN_LIB_SUFFIX}</code>,</li></ul></div></li></ul></div><p>
        with:
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="varname">RDX</code></span></dt><dd>'Release' or 'Debug',</dd><dt><span class="term"><code class="varname">TARGET</code></span></dt><dd>OS the library has been compiled for (eg. 'Linux', 'Cygwin'),</dd><dt><span class="term"><code class="varname">CXX</code></span></dt><dd>Name of the compiler (eg. 'g++').</dd><dt><span class="term"><code class="varname">STATIC_LIB_PREFIX</code></span></dt><dd>Dynamic library prefix for the given OS (eg. 'lib' or nothing).</dd><dt><span class="term"><code class="varname">STATIC_LIB_SUFFIX</code></span></dt><dd>Dynamic library extension (eg. '.lib', '.a').</dd><dt><span class="term"><code class="varname">DYN_LIB_PREFIX</code></span></dt><dd>Dynamic library prefix (eg. 'lib' or nothing).</dd><dt><span class="term"><code class="varname">DYN_LIB_SUFFIX</code></span></dt><dd>Dynamic library extension (eg. '.dll', '.so').</dd></dl></div><p>
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="howto"></a>3. How to use it</h2></div></div></div><p>
    The basic process is the following:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Creation of an XML resource file;</li><li class="listitem">Transformation of the XML resource file into target language code;</li><li class="listitem">Integration.</li></ol></div><p>
    The content of the XML resource file will be presented
    in the <a class="link" href="#xmlres" title="4. XML resource file">next section</a>.
    The <a class="link" href="#xslt" title="3.1. Transformation">transformation</a>
    and <a class="link" href="#integ" title="3.2. Integration">integration</a> steps are discussed here.
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xslt"></a>3.1. Transformation</h3></div></div></div><p>
        The transformation of the XML resource file into target language code is very easy.
        It is nothing but a simple transformation.
        </p><p>
        You may use either the original XSL transformation stylesheets <code class="filename">cli2cpp.xsl</code> and <code class="filename">cli2java.xsl</code>,
        or their python tools equivalents <code class="filename">cli2cpp.py</code> and <code class="filename">cli2java.py</code>.
        Even though python tools, added in version 2.8, run faster than XSL stylesheets, both techologies are still provided for backward compatibility reasons.
        </p><div class="example"><a name="eg.transformation"></a><p class="title"><b>Example 1. Transformation of an XML resource file</b></p><div class="example-contents"><p>
            Try it out!
            Here is a sample CLI resource file:
                
</p><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="myCLI"&gt;
&lt;/cli&gt;
</pre><p>

            Copy the stuff into a new <code class="filename">empty.xml</code> file.
            </p><p>
            Let's say we want to have C++.
            Using <code class="filename">cli2cpp.xsl</code>, launch the XSL transformation
            thanks to a command line XSLT processor.
            I usually use  <span class="command"><strong>xsltproc</strong></span>:
                </p><pre class="programlisting">xsltproc ${CLI_DIR}/tools/cli2cpp.xsl empty.xml &gt; empty.cpp</pre><p>
            Or, since version 2.8, the python tools that do the same:
                </p><pre class="programlisting">python ${CLI_DIR}/tools/cli2cpp.py empty.xml &gt; empty.cpp</pre><p>
            That's all folks!
            Have a look at the <a class="ulink" href="misc/empty.cpp" target="_top">generated C++ file</a> if you want.
            </p><p>
            And it works with java also!
                </p><pre class="programlisting">xsltproc --stringparam STR_CliClassName "Empty" ${CLI_DIR}/tools/cli2java.xsl empty.xml &gt; Empty.java</pre><p>
            or:
                </p><pre class="programlisting">python ${CLI_DIR}/tools/cli2java.py --cli-class-name "Empty" empty.xml &gt; Empty.java</pre><p>
            Have a look at the <a class="ulink" href="misc/Empty.java" target="_top">generated Java file</a>.
            </p><p>
            You're now ready to compile.
            </p></div></div><br class="example-break"><p>
        The XSL transformation stylesheets have several parameters:
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">C++:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="varname">B_CliStaticCreation</code>:
                            CLI static creation. Default is 0 (false) since version 2.7.
                            When set to 1, a static instance of the CLI you defined is automatically defined in the source code generated.
                            When set to 0, the CLI instance is not created by the XSL transformation,
                            so that you can do the dynamic instantiation at the appropriate time
                            (inherited from Java experience).</li><li class="listitem"><code class="varname">STR_VarPrefix</code>:
                            Variables prefix. Default is <code class="constant">m_pcli_</code>.</li><li class="listitem"><code class="varname">STR_ClassPrefix</code>:
                            Classes prefix. Default is empty.</li><li class="listitem"><code class="varname">STR_Indent</code>:
                            Basic indentation. Default is four spaces.</li><li class="listitem"><code class="varname">STR_UserIndent</code>:
                            User code indentation. Makes the generated code more readable when debugging. Default is <code class="code">/* &gt; */ </code>.</li><li class="listitem"><code class="varname">STR_CliClassName</code>:
                            CLI class name. Default is a derivate from the CLI name.</li></ul></div></dd><dt><span class="term">Java:</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="varname">STR_CliClassScope</code>:
                            CLI class scope. Default is empty, which means private.</li><li class="listitem"><code class="varname">STR_VarPrefix</code>:
                            Variables prefix. Default is <code class="code">m_cli</code>.</li><li class="listitem"><code class="varname">STR_ClassPrefix</code>:
                            Classes prefix. Default is empty.</li><li class="listitem"><code class="varname">STR_Indent</code>:
                            Basic indentation. Default is four spaces.</li><li class="listitem"><code class="varname">STR_UserIndent</code>:
                            User code indentation. Makes the generated code more readable when debugging. Default is <code class="code">/* &gt; */ </code>.</li><li class="listitem"><code class="varname">STR_CliClassName</code>:
                            CLI class name. Default is a derivate from the CLI name.
                            It is highly recommended you override this parameter for integration considerations.</li></ul></div></dd></dl></div><p>
        </p><p>
        The python tools come with <code class="option">--help</code> options:
</p><pre class="programlisting">
$ python ${CLI_DIR}/tools/cli2cpp.py --help
usage: cli2cpp [-h] [--version] [--cli-class-name CLI_CLASS_NAME]
               [--cli-class-scope CLI_CLASS_SCOPE] [--static | --no-static]
               [--class-prefix CLASS_PREFIX] [--var-prefix VAR_PREFIX]
               [--indent INDENT] [--user-indent USER_INDENT]
               xml-res

positional arguments:
  xml-res               CLI XML resource file

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  --cli-class-name CLI_CLASS_NAME
                        Main CLI class name (default is based on &lt;class-
                        prefix&gt; and @name attribute).
  --cli-class-scope CLI_CLASS_SCOPE
                        Main CLI class scope (default is empty).
  --static              Static instance creation
  --no-static           No static instance creation (default)
  --class-prefix CLASS_PREFIX
                        Class prefix (default is empty).
  --var-prefix VAR_PREFIX
                        Variable prefix (default is 'm_pcli_').
  --indent INDENT       Indentation pattern (default is 4 spaces).
  --user-indent USER_INDENT
                        User-code indentation pattern (default is '/* &gt; */ ').
</pre><p>
</p><pre class="programlisting">
$ python ${CLI_DIR}/tools/cli2java.py --help
usage: cli2java [-h] [--version] [--cli-class-name CLI_CLASS_NAME]
                [--cli-class-scope CLI_CLASS_SCOPE]
                [--class-prefix CLASS_PREFIX] [--var-prefix VAR_PREFIX]
                [--indent INDENT] [--user-indent USER_INDENT]
                xml-res

positional arguments:
  xml-res               CLI XML resource file

optional arguments:
  -h, --help            show this help message and exit
  --version             show program's version number and exit
  --cli-class-name CLI_CLASS_NAME
                        Main CLI class name (default is based on &lt;class-
                        prefix&gt; and @name attribute).
  --cli-class-scope CLI_CLASS_SCOPE
                        Main CLI class scope (default is empty).
  --class-prefix CLASS_PREFIX
                        Class prefix (default is empty).
  --var-prefix VAR_PREFIX
                        Variable prefix (default is 'm_cli').
  --indent INDENT       Indentation pattern (default is 4 spaces).
  --user-indent USER_INDENT
                        User-code indentation pattern (default is '/* &gt; */ ').
</pre><p>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            If you have a look at the output source code, the complexity of this generated code may disturb you.
            As a matter of fact, since it is some managed code, you are not supposed to get into it,
            and even less supposed to modify it.
            But, you may however also figure out that it is nevertheless quite well presented:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Indentation is respected;</li><li class="listitem">User-code is highlighted thanks to the <code class="varname">STR_UserIndent</code> pattern at the beginning of the lines;</li><li class="listitem">The current word sequence in analysis is presented in comments throughout the code.</li></ul></div><p>
            I hope these measures could help you when something goes wrong at compile or at debug time.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="integ"></a>3.2. Integration</h3></div></div></div><p>
        Now that you have your target language file,
        you want to have a CLI program running don't you?
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="integ.cpp"></a>3.2.1. C++ integration</h4></div></div></div><p>
            OK! Let's do it.
            Here is the trick for C++.
            </p><p>
            Try to compile <code class="filename">empty.cpp</code> and link.
            You should have a missing symbol: <code class="function">main</code>.
            </p><p>
            Not a big deal!
            You create a new C++ file with a main function we will launch the CLI in.
            This is done through the <code class="function">Run</code> method
            with a device parameter of the <code class="classname">cli::Shell</code> class.
            </p><p>
            Though, you need to give a <code class="classname">cli::Cli</code> reference at the beginning.
            Different strategies at this point:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">CLI instantiation from the user code
                      (preferred method);</li><li class="listitem">Static CLI instantiation and retrieval through <code class="function">cli::Cli::FindFromName</code> and a regular expression
                      (deprecated but maintained);</li><li class="listitem">Static CLI creation and use of the <code class="sgmltag-attribute">cpp</code> attribute
                      of the <code class="sgmltag-element">cli</code> element
                      in the XML resource file
                      (definitely deprecated, this method has been undocumented);</li></ul></div><p>
            </p><div class="example"><a name="eg.cpp.init1"></a><p class="title"><b>Example 2. C++ integration - instantiation from user code</b></p><div class="example-contents"><p>
                Use <code class="filename">cli2cpp.xsl</code> parameters to give an explicit name to CLI class generated:
                    </p><pre class="programlisting">xsltproc --param STR_CliClassName "'EmptyCli'" ${CLI_DIR}/tools/cli2cpp.xsl empty.xml &gt; empty_cli.h</pre><p>
                Create a <code class="filename">goempty.cpp</code> file that simply includes <code class="filename">empty_cli.h</code> and make the instantiation at the appropriate time:
</p><pre class="programlisting">
#include "cli/common.h"
#include "cli/console.h"
#include "empty_cli.h"

int main(void) {
    EmptyCli cli_EmptyCli;
    cli::Shell cli_Shell(cli_EmptyCli);
    cli::Console cli_Console(false);
    cli_Shell.Run(cli_Console);
}
</pre><p>
                </p><p>
                Compile and link (with <span class="command"><strong>g++</strong></span> for instance):
</p><pre class="programlisting">
g++ -I${CLI_DIR}/cpp/include -Wno-unused-label -c goempty.cpp
g++ -o empty goempty.o -L${CLI_DIR}/cpp/build/make/Cygwing++/Release -lclicpp -lncurses
</pre><p>
                And run:
                    </p><pre class="programlisting">./empty</pre><p>
                Great for an empty stuff, ain't it?
                </p></div></div><br class="example-break"><div class="example"><a name="eg.cpp.init2"></a><p class="title"><b>Example 3. C++ integration - static instantiation</b></p><div class="example-contents"><p>
                Use <code class="filename">cli2cpp.xsl</code> parameters to activate static CLI creation:
                    </p><pre class="programlisting">xsltproc --param B_CliStaticCreation 1 ${CLI_DIR}/tools/cli2cpp.xsl empty.xml &gt; empty_cli.cpp</pre><p>
                Then the file <code class="filename">goempty2.cpp</code> below looks for CLI instances that had been created thanks to a regular expression on their names:
</p><pre class="programlisting">
#include "cli/common.h"
#include "cli/console.h"

int main(void) {
    cli::Cli::List cli_List(10);
    const int i_Clis = cli::Cli::FindFromName(cli_List, ".*");
    if (i_Clis == 0)
    {
        fprintf(stderr, "Error: No CLI found.\n");
        return -1;
    }
    else if (i_Clis &gt; 1)
    {
        fprintf(stderr, "Warning: Several CLIs found. Executing only the first one.\n");
    }
    cli::Shell cli_Shell(*cli_List.GetHead());
    cli::Console cli_Console(false);
    cli_Shell.Run(cli_Console);
}
</pre><p>
                </p><p>
                Once again, compile and link:
</p><pre class="programlisting">
g++ -I${CLI_DIR}/cpp/include -Wno-unused-label -c empty_cli.cpp
g++ -I${CLI_DIR}/cpp/include -c goempty2.cpp
g++ -o empty2 empty_cli.o goempty2.o -L${CLI_DIR}/cpp/build/make/${TARGET}${CXX}/${RDX} -lclicpp -lncurses
</pre><p>
                And run:
                    </p><pre class="programlisting">./empty2</pre><p>
                </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="integ.java"></a>3.2.2. Java integration</h4></div></div></div><p>
            No static instantiation works in Java.
            The best way to instantiate the CLI object is to retrieve the class from its name,
            then to call <code class="function">newInstance</code> on it.
            That's what is presented in the example below.
            </p><div class="example"><a name="eg.java.init"></a><p class="title"><b>Example 4. Java integration</b></p><div class="example-contents"><p>
                Considering you have generated a <code class="filename">Empty.java</code> file
                as described in <a class="link" href="#xslt" title="3.1. Transformation">XSLT transformation section</a>,
                you may just compile this file with <span class="command"><strong>javac</strong></span>,
                and another source file <code class="filename">GoEmpty.java</code> loading the <code class="classname">Empty</code> class:
</p><pre class="programlisting">
class GoEmpty {
    public static void main(String ARJ_Args[]) {
        // Load the class.
        cli.Cli cli_Cli = null;
        try {
            Class j_CliClass = Class.forName("Empty");
            cli_Cli = (cli.Cli) j_CliClass.newInstance();
        } catch (Exception e) {
            e.printStackTrace();
            return;
        }
        // Create an I/O device.
        cli.IODevice.Interface cli_Input = new cli.Console();
        // Create a shell.
        cli.Shell cli_Shell = new cli.Shell(cli_Cli);
        // Launch the shell.
        cli_Shell.run(cli_Input);
    }
}
</pre><p>
                </p><p>
                Define a <code class="varname">CLI_JAVA_DIR</code> that points to the place where you installed the CLI library.
                Either point directly compilation outputs in the <code class="filename">${CLI_DIR}/java/build/make/${RDX}</code> directory,
                or copy <code class="filename">cli.jar</code> and <code class="filename">${DYN_LIB_PREFIX}cli${DYN_LIB_SUFFIX}</code> in your own directory and point to it.
                </p><p>
                Compile:
                </p><pre class="programlisting">javac -classpath ${CLI_JAVA_DIR}/cli.jar GoEmpty.java Empty.java</pre><p>
                Finally run:
                </p><pre class="programlisting">java -classpath "${CLI_JAVA_DIR}/cli.jar;." -Djava.library.path=${CLI_JAVA_DIR} GoEmpty</pre><p>
                    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                    If you get stuck at this point, please read the <a class="link" href="#faq.Q650" title="7.9. The Java integration sample gets stuck when executed under cygwin!">dedicated FAQ</a>.
                    </div><p>
                The <code class="option">-classpath</code> option let the Java Virtual Machine know were to find the CLI Java objects.
                The <code class="option">-Djava.library.path=</code> option tells the Java Virtual Machine where to load the CLI native library from.
                <code class="varname">CLI_JAVA_DIR</code> can point to an external installation path,
                or directly to the <code class="filename">${CLI_DIR}/java/build/make/${RDX}</code> output directory in a devel configuration.
                But you may prefer to copy Java output files in your own execution directory.
                These options become useless then.
                </p></div></div><br class="example-break"></div><p>
        The examples above showed you how to create and launch an empty CLI.
        Now you want to do more interesting stuff, don't you?
            </p><div class="blockquote"><blockquote class="blockquote">Oh yes I do!</blockquote></div><p>
        So go to <a class="link" href="#xmlres" title="4. XML resource file">next section</a>.
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="xmlres"></a>4. XML resource file</h2></div></div></div><div class="blockquote"><blockquote class="blockquote">THAT's interesting!</blockquote></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.cli"></a>4.1. 
        <code class="sgmltag-element">cli</code>
        - The root element</h3></div></div></div><p>
        The root element, named <code class="sgmltag-element">cli</code>, directly defines the CLI.
        It has only one resource related attribute: <code class="sgmltag-attribute">name</code>.
        It obviously gives the name of the CLI.
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>The name of the CLI is used in the prompt.</div><p>
        </p><div class="blockquote"><blockquote class="blockquote">
        OK! Nothing more for the moment.
        I would like to define my own commands now.
        </blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.keyword.endl"></a>4.2. 
        <code class="sgmltag-element">keyword</code>
        &amp; <code class="sgmltag-element">endl</code>
        - Define a syntax tree</h3></div></div></div><p>
        Keywords and end of lines are the basics of a CLI.
        </p><div class="example"><a name="eg.hello"></a><p class="title"><b>Example 5. Hello world!</b></p><div class="example-contents">
            Consider the following command <span class="command"><strong>say hello</strong></span>.
            It is actually a sequence of two keywords
            <span class="command"><strong>say</strong></span> and <span class="command"><strong>hello</strong></span>,
            terminated by an and of line specification.
            Here is an XML resource file <code class="filename">hello.xml</code>
            implementing the command line:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Hello"&gt;
 &lt;keyword string="say"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            If you want to add another command line <span class="command"><strong>shout hello</strong></span>,
            here is how your <code class="filename">hello.xml</code> file should look like:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Hello"&gt;
 &lt;keyword string="say"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
 &lt;keyword string="shout"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            Now if you want to add other command lines <span class="command"><strong>say bye</strong></span>
            and <span class="command"><strong>shout bye</strong></span>,
            have a look at the corresponding XML resource file:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Hello"&gt;
 &lt;keyword string="say"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
  &lt;keyword string="bye"&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
 &lt;keyword string="shout"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
  &lt;keyword string="bye"&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre></div></div><br class="example-break"><p>
        Considering certain command lines have keywords in common,
        like <span class="command"><strong>say hello</strong></span> and <span class="command"><strong>say bye</strong></span>
        in the previous example,
        eventually what you define is a syntax tree.
        A first node corresponds to the keyword <span class="command"><strong>say</strong></span>,
        which has two children <span class="command"><strong>hello</strong></span> and <span class="command"><strong>bye</strong></span>.
        For an illustration of that syntax tree,
        load the XML file of the last example into your favorite web browser
        and play with toggles.
        </p><div class="blockquote"><blockquote class="blockquote">
        Cool!
        I've tried it out.
        I can define my own keywords and so.
        It's pretty cool, but that's a pity there's no help for my commands.
        </blockquote></div><p>
        Hold on!
        <a class="link" href="#xmlres.help" title="4.3.  help - Put help everywhere">Next section</a> tells how to do that.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.help"></a>4.3. 
        <code class="sgmltag-element">help</code>
        - Put help everywhere</h3></div></div></div><p>
        CLI is basically a user interface,
        so that's a good idea to give help as much as you can.
        It's easy to do such a thing in XML resource files.
        <code class="sgmltag-element">help</code> elements can be added to CLI elements
        to document them.
        The <code class="sgmltag-attribute">lang</code> attribute identifies
        the corresponding language.
        </p><div class="example"><a name="eg.help"></a><p class="title"><b>Example 6. Put help everywhere</b></p><div class="example-contents">
            Here is how you could document a <code class="filename">hello.xml</code> file:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Hello"&gt;&lt;help lang="en"&gt;Hello menu&lt;/help&gt;&lt;help lang="fr"&gt;Menu Hello&lt;/help&gt;
 &lt;keyword string="say"&gt;&lt;help lang="en"&gt;Say something.&lt;/help&gt;&lt;help lang="fr"&gt;Dire quelque chose.&lt;/help&gt;
  &lt;keyword string="hello"&gt;&lt;help lang="en"&gt;Say hello.&lt;/help&gt;&lt;help lang="fr"&gt;Dire bonjour.&lt;/help&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
  &lt;keyword string="bye"&gt;&lt;help lang="en"&gt;Say goodbye.&lt;/help&gt;&lt;help lang="fr"&gt;Dire au revoir.&lt;/help&gt;
   &lt;endl&gt;&lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre></div></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            Only the <code class="sgmltag-attvalue">en</code> and <code class="sgmltag-attvalue">fr</code> language identifiers
            are available for the moment.
        </div><div class="blockquote"><blockquote class="blockquote">
        That's what I needed, but wait a minute!
        I will have to write down a user manual for this interface
        and I'm afraid about describing the thing twice,
        between my user manual on one hand,
        and the help provided with the commands on the other hand.
        Any suggestion?
        </blockquote></div><p>
        For sure, automatic documentation generation will help you.
        This feature is described in a <a class="link" href="#xmlres.cli2help" title="4.9. Automatic documentation generation">later section</a>.
        </p><div class="blockquote"><blockquote class="blockquote">
        Good! Now, how do I execute stuff from the command lines?
        </blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.native"></a>4.4. <code class="sgmltag-element">cpp</code>, <code class="sgmltag-element">java</code>
                - Insert target language directly in the resource file</h3></div></div></div><p>
        Target language instructions are inserted straight forward
        in the XML resource file
        through target language tags:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="sgmltag-element">cpp</code> for C++</li><li class="listitem"><code class="sgmltag-element">java</code> for Java</li><li class="listitem">...</li></ul></div><p>
        </p><p>
        Basically, these tags are located in <code class="sgmltag-element">endl</code> elements.
        It allows you to define what is executed
        when a command line has been successfully parsed.
        </p><div class="example"><a name="eg.code"></a><p class="title"><b>Example 7. Insert target language instructions</b></p><div class="example-contents">
            Let's say you have a C++ function <code class="function">sayHello</code>,
            or a Java class <code class="classname">HelloApi</code>,
            and you would like those to be called when the user types <span class="command"><strong>say hello</strong></span>.
            This is how you would do it:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Hello"&gt;
 &lt;keyword string="say"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;
    &lt;cpp&gt;sayHello();&lt;/cpp&gt;
    &lt;java&gt;HelloApi.sayHello();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            If you try to transform and compile the sample as is in C++, it should not work straight forward.
            Since <code class="function">helloWorld</code> is not declared, the output does not compile.
            The trick is to use special sections as below:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Hello"&gt;
 &lt;cpp option="include"&gt;#include "hello_api.h"&lt;/cpp&gt;
 &lt;java option="import"&gt;import cli.test.HelloApi;&lt;/java&gt;
 &lt;keyword string="say"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;
    &lt;cpp&gt;sayHello();&lt;/cpp&gt;
    &lt;java&gt;HelloApi.sayHello();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            Have a C++ <code class="function">sayHello</code> function declaration
            in a <code class="filename">hello_api.h</code> file, and it should work.
            Declare a <code class="function">sayHello</code> in a <code class="classname">HelloApi</code> class, and it should work as well.
        </div></div><br class="example-break"><p>
        <code class="sgmltag-element">cpp</code> and <code class="sgmltag-element">java</code>
        are not restricted to <code class="sgmltag-element">endl</code> elements.
        You can attach target code to almost any element of your syntax tree,
        as shown in examples <a class="link" href="#eg.tag.circle1" title="Example 18. Syntax tags - An optional command line">Syntax tags - An optional command line</a>
        and <a class="link" href="#eg.tag.circle2" title="Example 19. Syntax tags - Another optional command line">Syntax tags - Another optional command line</a>.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The user code to be executed is given straight away in the XML resource file.
        This may seem weird at frst, but it is however, to my point of view, a nice way to do.
        You've got everything in a single readable file.
        Thus, it's easy to maintain.
        On the other hand, it's easy to understand what is executed on each command.
        And if you indent your XML resource file elegantly,
        it could look like a piece of code somehow.
        </div><p>
        Now you may need to print out results.
        Use the <code class="sgmltag-element">out</code>
        and <code class="sgmltag-element">err</code> elements for that.
        Use them like <code class="varname">std::cout</code> and <code class="varname">std::cerr</code> in C++,
        and use the <code class="varname">cli::endl</code> constant for carriage returns.
        Use <code class="function">put</code> and <code class="function">endl</code> methods in Java.
        </p><div class="example"><a name="eg.output"></a><p class="title"><b>Example 8. Output</b></p><div class="example-contents">
            Here is an example of output for C++:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Hello"&gt;
 &lt;keyword string="say"&gt;
  &lt;keyword string="hello"&gt;
   &lt;endl&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Hello world!" &lt;&lt; cli::endl;&lt;/cpp&gt;
    &lt;java&gt;&lt;out/&gt;.put("Hello world!").endl();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre></div></div><br class="example-break"><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
        You'd rather use <code class="sgmltag-element">out</code>
        and <code class="sgmltag-element">err</code>
        than <code class="varname">std::cout</code> and <code class="varname">std::cerr</code>
        in XML resource files.
        Indeed, CLI redirects these outputs for you.
        Basically,
        if it is launched from the console, output is sent in the console,
        if it is launched from a TCP connection, output is sent on this TCP connection...
        without changing anything in your XML resource file.
        </div><p>
        Special sections have been introduced in the example <a class="link" href="#eg.code" title="Example 7. Insert target language instructions">above</a>.
        Here is the detail of how they are organized, for C++ generation:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="sgmltag-attvalue">head</code> section:
                    you may use this section for very first includes
                    or for pre-processing for instance</li><li class="listitem">(auto-generated) CLI includes.</li><li class="listitem"><code class="sgmltag-attvalue">include</code> section:
                    this section basically receives user includes.</li><li class="listitem">(auto-generated) CLI definition:
                    the static CLI structure, and the related command executions are defined here.
                    Within that section, the following subsections are available for each menu:
                    <div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><code class="sgmltag-attvalue">members</code> section:
                                this section receives member variables or methods for the current menu.</li><li class="listitem"><code class="sgmltag-attvalue">constructor</code> section:
                                this section receives code to be placed in the constructor of the current menu.</li></ol></div></li><li class="listitem"><code class="sgmltag-attvalue">tail</code> section:
                    very last section.</li></ol></div><p>
        </p><p>
        Java sections look the same except for the <code class="sgmltag-attvalue">include</code> section,
        which is named <code class="sgmltag-attvalue">import</code> in Java.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        C++ sections have changed a lot in version 2.1,
        being greatly improved thanks to Java experience.
        </div><div class="blockquote"><blockquote class="blockquote">
        I got it.
        Now, tell me, how do I have users entering values?
        </blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.param"></a>4.5. <code class="sgmltag-element">param</code>
                - Let the user enter data</h3></div></div></div><p>
        <code class="sgmltag-element">param</code> elements can be used
        instead of <code class="sgmltag-element">keyword</code> elements.
        Obviously, this kind of element controls parameters elements.
        The CLI library manages different types of parameters:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">strings</li><li class="listitem">integers</li><li class="listitem">floats</li><li class="listitem">host names</li></ul></div><p>
        </p><div class="example"><a name="eg.param"></a><p class="title"><b>Example 9. Parameters</b></p><div class="example-contents">
            The following example illustrates how to use
            <code class="sgmltag-element">param</code> elements:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Params"&gt;
 &lt;keyword string="enter"&gt;
  &lt;keyword string="string"&gt;
   &lt;param type="string" id="a-string"&gt;
    &lt;endl&gt;
     &lt;cpp&gt;&lt;out/&gt; &lt;&lt; &lt;value-of param="a-string"/&gt; &lt;&lt; cli::endl;&lt;/cpp&gt;
     &lt;java&gt;&lt;out/&gt;.put(&lt;value-of param="a-string"/&gt;).endl();&lt;/java&gt;
    &lt;/endl&gt;
   &lt;/param&gt;
  &lt;/keyword&gt;
  &lt;keyword string="int"&gt;
   &lt;param type="int" id="an-int"&gt;
    &lt;endl&gt;
     &lt;cpp&gt;&lt;out/&gt; &lt;&lt; &lt;value-of param="an-int"/&gt; &lt;&lt; cli::endl;&lt;/cpp&gt;
     &lt;java&gt;&lt;out/&gt;.put(&lt;value-of param="an-int"/&gt;).endl();&lt;/java&gt;
    &lt;/endl&gt;
   &lt;/param&gt;
  &lt;/keyword&gt;
  &lt;keyword string="float"&gt;
   &lt;param type="float" id="a-float"&gt;
    &lt;endl&gt;
     &lt;cpp&gt;&lt;out/&gt; &lt;&lt; &lt;value-of param="a-float"/&gt; &lt;&lt; cli::endl;&lt;/cpp&gt;
     &lt;java&gt;&lt;out/&gt;.put(&lt;value-of param="a-float"/&gt;).endl();&lt;/java&gt;
    &lt;/endl&gt;
   &lt;/param&gt;
  &lt;/keyword&gt;
  &lt;keyword string="host"&gt;
   &lt;param type="host" id="a-host"&gt;
    &lt;endl&gt;
     &lt;cpp&gt;&lt;out/&gt; &lt;&lt; &lt;value-of param="a-host"/&gt; &lt;&lt; cli::endl;&lt;/cpp&gt;
     &lt;java&gt;&lt;out/&gt;.put(&lt;value-of param="a-host"/&gt;).endl();&lt;/java&gt;
    &lt;/endl&gt;
   &lt;/param&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre></div></div><br class="example-break"><p>
        Have a look at the way you get access to the entered values:
        through <code class="sgmltag-attribute">param</code> attributes
        of <code class="sgmltag-element">value-of</code> elements.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        A full support of host names is not provided yet.
        </div><div class="blockquote"><blockquote class="blockquote">
        How do I make the user enter data out of command lines?
        </blockquote></div><p>
        This is discussed apart from the <a class="link" href="#xmlres" title="4. XML resource file">XML resource file</a> section
        in the <a class="link" href="#ui" title="5. UI controls">UI controls</a> section.
        </p><div class="blockquote"><blockquote class="blockquote">
        Well, I can do lots of things now, but a simple syntax tree is limitative, don't you think?
        </blockquote></div><p>
        I know, that's the reason why I've created
        <code class="sgmltag-element">tag</code> elements.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.tag"></a>4.6. <code class="sgmltag-element">tag</code>
                - How to make jumps in the syntax tree</h3></div></div></div><p>
        Tags act like labels and gotos do in C/C++.
        The equivalent of the label definition
        is a <code class="sgmltag-element">tag</code> element
        with an <code class="sgmltag-attribute">id</code> attribute.
        And the equivalent of a goto statement
        is a <code class="sgmltag-element">tag</code> element
        with a <code class="sgmltag-attribute">ref</code> attribute.
        </p><p>
        Thanks to tags, you can define such kind of patterns:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="command"><strong>a*</strong></span></li><li class="listitem"><span class="command"><strong>a+</strong></span></li><li class="listitem"><span class="command"><strong>(ab)*</strong></span></li><li class="listitem"><span class="command"><strong>(ab)+</strong></span></li><li class="listitem"><span class="command"><strong>a(b1|b2)c</strong></span></li><li class="listitem"><span class="command"><strong>a(b1|b2|)c</strong></span></li><li class="listitem"><span class="command"><strong>(a|b)*</strong></span></li><li class="listitem"><span class="command"><strong>(a|b)+</strong></span></li></ul></div><p>
        The following examples show you how to do such syntax patterns.
        </p><div class="example"><a name="eg.tag.a-star"></a><p class="title"><b>Example 10. Syntax tags - <span class="command">a*</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">


,-&gt;
|
|
`--



</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="a*"&gt;
 &lt;tag id="my-tag"&gt;
  &lt;endl&gt;&lt;/endl&gt;
  &lt;keyword string="a"&gt;
   &lt;tag ref="my-tag" max="unbounded"/&gt;
  &lt;/keyword&gt;
 &lt;/tag&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><div class="example"><a name="eg.tag.a-plus"></a><p class="title"><b>Example 11. Syntax tags - <span class="command">a+</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">


,-&gt;
|
|
`--



</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="a+"&gt;
 &lt;tag id="my-tag"&gt;
  &lt;keyword string="a"&gt;
   &lt;endl&gt;&lt;/endl&gt;
   &lt;tag ref="my-tag" max="unbounded"/&gt;
  &lt;/keyword&gt;
 &lt;/tag&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><div class="example"><a name="eg.tag.ab-star"></a><p class="title"><b>Example 12. Syntax tags - <span class="command">(ab)*</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">


,-&gt;
|
|
|
`--




</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="(ab)*"&gt;
 &lt;tag id="my-tag"&gt;
  &lt;endl&gt;&lt;/endl&gt;
  &lt;keyword string="a"&gt;
   &lt;keyword string="b"&gt;
    &lt;tag ref="my-tag" max="unbounded"/&gt;
   &lt;/keyword&gt;
  &lt;/keyword&gt;
 &lt;/tag&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><div class="example"><a name="eg.tag.ab-plus"></a><p class="title"><b>Example 13. Syntax tags - <span class="command">(ab)+</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">


,-&gt;
|
|
|
`--




</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="(ab)+"&gt;
 &lt;tag id="my-tag"&gt;
  &lt;keyword string="a"&gt;
   &lt;keyword string="b"&gt;
    &lt;endl&gt;&lt;/endl&gt;
    &lt;tag ref="my-tag" max="unbounded"/&gt;
   &lt;/keyword&gt;
  &lt;/keyword&gt;
 &lt;/tag&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><p>
        Let me show you how to make a
        <span class="command"><strong>a(b1|b2|)c</strong></span> syntax pattern
        before <span class="command"><strong>a(b1|b2)c</strong></span>.
        </p><div class="example"><a name="eg.tag.a-b1-b2-nil-c"></a><p class="title"><b>Example 14. Syntax tags - <span class="command">a(b1|b2|)c</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">




,--
|
|
+--
|
`-&gt;






</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="a(b1|b2|)c"&gt;
 &lt;keyword string="a"&gt;
  &lt;keyword string="b1"&gt;
   &lt;tag ref="my-tag"/&gt;
  &lt;/keyword&gt;
  &lt;keyword string="b2"&gt;
   &lt;tag ref="my-tag"/&gt;
  &lt;/keyword&gt;
  &lt;tag id="my-tag"&gt;
   &lt;keyword string="c"&gt;
    &lt;endl&gt;&lt;/endl&gt;
   &lt;/keyword&gt;
  &lt;/tag&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><p>
        Now, in order to forbid the CLI to go directly from keyword <span class="command"><strong>a</strong></span>
        to tag <code class="sgmltag-value">my-tag</code>,
        just add a <code class="sgmltag-attribute">hollow</code> attribute
        with a <code class="sgmltag-value">yes</code> value.
        </p><div class="example"><a name="eg.tag.a-b1-b2-c"></a><p class="title"><b>Example 15. Syntax tags - <span class="command">a(b1|b2)c</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">




,--
|
|
+--
|
`-&gt;






</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="a(b1|b2)c"&gt;
 &lt;keyword string="a"&gt;
  &lt;keyword string="b1"&gt;
   &lt;tag ref="my-tag"/&gt;
  &lt;/keyword&gt;
  &lt;keyword string="b2"&gt;
   &lt;tag ref="my-tag"/&gt;
  &lt;/keyword&gt;
  &lt;tag id="my-tag" hollow="yes"&gt;
   &lt;keyword string="c"&gt;
    &lt;endl&gt;&lt;/endl&gt;
   &lt;/keyword&gt;
  &lt;/tag&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><p>
        Now let us combine <span class="command"><strong>|</strong></span> and <span class="command"><strong>*</strong></span> patterns.
        </p><div class="example"><a name="eg.tag.a-b-star"></a><p class="title"><b>Example 16. Syntax tags - <span class="command">(a|b)*</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">


,---&gt;
|
|
| ,--
| |
| |
| +--
| |
| `-&gt;
`----



</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="(a|b)*"&gt;
 &lt;tag id="my-tag1"&gt;
  &lt;endl&gt;&lt;/endl&gt;
  &lt;keyword string="a"&gt;
   &lt;tag ref="my-tag2"/&gt;
  &lt;/keyword&gt;
  &lt;keyword string="b"&gt;
   &lt;tag ref="my-tag2"/&gt;
  &lt;/keyword&gt;
  &lt;tag id="my-tag2" hollow="yes"&gt;
   &lt;tag ref="my-tag1" max="unbounded"/&gt;
  &lt;/tag&gt;
 &lt;/tag&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><div class="example"><a name="eg.tag.a-b-plus"></a><p class="title"><b>Example 17. Syntax tags - <span class="command">(a|b)+</span> patterns</b></p><div class="example-contents"><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">


,---&gt;
|
| ,--
| |
| |
| +--
| |
| `-&gt;
|
`----



</pre>
            </td><td></td><td valign="top">
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="(a|b)+"&gt;
 &lt;tag id="my-tag1"&gt;
  &lt;keyword string="a"&gt;
   &lt;tag ref="my-tag2"/&gt;
  &lt;/keyword&gt;
  &lt;keyword string="b"&gt;
   &lt;tag ref="my-tag2"/&gt;
  &lt;/keyword&gt;
  &lt;tag id="my-tag2" hollow="yes"&gt;
   &lt;endl&gt;&lt;/endl&gt;
   &lt;tag ref="my-tag1" max="unbounded"/&gt;
  &lt;/tag&gt;
 &lt;/tag&gt;
&lt;/cli&gt;
</pre>

            </td></tr></tbody></table></div></div></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        This user guide has formerly proposed other directions for <span class="command"><strong>(a|b)+</strong></span> and <span class="command"><strong>(a|b)*</strong></span> patterns.
        Since version 2.5, you are now advised to proceed as described above,
        so that automatic documentation generation works better (see <a class="link" href="#xmlres.cli2help" title="4.9. Automatic documentation generation">Automatic documentation generation</a>).
        </div><p>
        In lesser theoretical words, <code class="sgmltag-element">tag</code> elements allow you to define command lines with options.
        </p><div class="example"><a name="eg.tag.circle1"></a><p class="title"><b>Example 18. Syntax tags - An optional command line</b></p><div class="example-contents"><p>
            Consider the following object class:
                </p><pre class="programlisting">class Circle {
public:
    Circle(void) : m_iX(0), m_iY(0), m_iR(1), m_ulColor(0) {}
    void SetXPosition(int X) { m_iX = X; }
    int GetXPosition(void) const { return m_iX; }
    void SetYPosition(int Y) { m_iY = Y; }
    int GetYPosition(void) const { return m_iY; }
    void SetRadius(int R) { m_iR = R; }
    int GetRadius(void) const { return m_iR; }
    void SetColor(unsigned long C) { m_ulColor = C; }
    unsigned long GetColor(void) const { return m_ulColor; }
private:
    int m_iX;
    int m_iY;
    int m_iR;
    unsigned long m_ulColor;
};
void Draw(const Circle&amp; C) {}
</pre><p>
            or:
                </p><pre class="programlisting">public class Circle {
    public Circle() { m_iX = 0; m_iY = 0; m_iR = 1; m_ulColor = 0; }
    public void setXPosition(int X) { m_iX = X; }
    public int getXPosition() { return m_iX; }
    public void setYPosition(int Y) { m_iY = Y; }
    public int getYPosition() { return m_iY; }
    public void setRadius(int R) { m_iR = R; }
    public int getRadius() { return m_iR; }
    public void setColor(long C) { m_ulColor = C; }
    public long getColor() { return m_ulColor; }
    public void draw() {}

    private int m_iX;
    private int m_iY;
    private int m_iR;
    private long m_ulColor;
}
</pre><p>
            </p><p>
            Thanks to a tag, you can define an optional command line filling an object of this class:
                </p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">







,-&gt;
|
|
|
|
|
|
|
|
+--
|
|
|
|
|
|
+--
|
|
|
|
|
|
`--






</pre>
                </td><td></td><td valign="top">
                        
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Circle"&gt;
 &lt;cpp option="include"&gt;#include "circle.h"&lt;/cpp&gt;
 &lt;keyword string="add"&gt;
  &lt;keyword string="circle"&gt;
   &lt;cpp&gt;Circle c;&lt;/cpp&gt;
   &lt;java&gt;Circle c = new Circle();&lt;/java&gt;
   &lt;tag id="circle"&gt;
    &lt;endl&gt;
     &lt;cpp&gt;Draw(c);&lt;/cpp&gt;
     &lt;java&gt;c.draw();&lt;/java&gt;
    &lt;/endl&gt;
    &lt;keyword string="x_position"&gt;
     &lt;param type="int" id="X"&gt;
      &lt;cpp&gt;c.SetXPosition(&lt;value-of param="X"/&gt;);&lt;/cpp&gt;
      &lt;java&gt;c.setXPosition(&lt;value-of param="X"/&gt;);&lt;/java&gt;
      &lt;tag ref="circle" max="1"/&gt;
     &lt;/param&gt;
    &lt;/keyword&gt;
    &lt;keyword string="y_position"&gt;
     &lt;param type="int" id="Y"&gt;
      &lt;cpp&gt;c.SetYPosition(&lt;value-of param="Y"/&gt;);&lt;/cpp&gt;
      &lt;java&gt;c.setYPosition(&lt;value-of param="Y"/&gt;);&lt;/java&gt;
      &lt;tag ref="circle" max="1"/&gt;
     &lt;/param&gt;
    &lt;/keyword&gt;
    &lt;keyword string="radius"&gt;
     &lt;param type="int" id="R"&gt;
      &lt;cpp&gt;c.SetRadius(&lt;value-of param="R"/&gt;);&lt;/cpp&gt;
      &lt;java&gt;c.setRadius(&lt;value-of param="R"/&gt;);&lt;/java&gt;
      &lt;tag ref="circle" max="1"/&gt;
     &lt;/param&gt;
    &lt;/keyword&gt;
   &lt;/tag&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

                </td><td></td><td valign="top">
<pre class="programlisting">





(1)



(2)




(3)






(3)






(3)








</pre>
                </td></tr></tbody></table></div><p>
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Declare an object with optional values.</li><li class="listitem">Valid the object with its current values.</li><li class="listitem">Set optional values.</li></ol></div><p>
            </p><p>
            This example accepts the following command lines:
</p><pre class="programlisting">
add circle
add circle x_position 1
add circle y_position 2
add circle radius 2
add circle x_position -1 y_position -1 radius 3
...
</pre><p>
            </p></div></div><br class="example-break"><div class="example"><a name="eg.tag.circle2"></a><p class="title"><b>Example 19. Syntax tags - Another optional command line</b></p><div class="example-contents"><p>
            If you want parameters to be ordered, you could use the following pattern.
                </p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">










,--
|
|
|
|
+--
|
|
|
|
+--
|
|
|
|
+--
|
`-&gt;








</pre>
                </td><td></td><td valign="top">
                        
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="Circle"&gt;
 &lt;cpp option="include"&gt;#include "circle.h"&lt;/cpp&gt;
 &lt;keyword string="add"&gt;
  &lt;keyword string="circle"&gt;
   &lt;cpp&gt;Circle c;&lt;/cpp&gt;
   &lt;java&gt;Circle c = new Circle();&lt;/java&gt;
   &lt;keyword string="black"&gt;
    &lt;cpp&gt;c.SetColor(0x000000);&lt;/cpp&gt;
    &lt;java&gt;c.setColor(0x000000);&lt;/java&gt;
    &lt;tag ref="draw-circle"/&gt;
   &lt;/keyword&gt;
   &lt;keyword string="blue"&gt;
    &lt;cpp&gt;c.SetColor(0x00ff00);&lt;/cpp&gt;
    &lt;java&gt;c.setColor(0x00ff00);&lt;/java&gt;
    &lt;tag ref="draw-circle"/&gt;
   &lt;/keyword&gt;
   &lt;keyword string="red"&gt;
    &lt;cpp&gt;c.SetColor(0xff0000);&lt;/cpp&gt;
    &lt;java&gt;c.setColor(0xff0000);&lt;/java&gt;
    &lt;tag ref="draw-circle"/&gt;
   &lt;/keyword&gt;
   &lt;keyword string="green"&gt;
    &lt;cpp&gt;c.SetColor(0x0000ff);&lt;/cpp&gt;
    &lt;java&gt;c.setColor(0x0000ff);&lt;/java&gt;
    &lt;tag ref="draw-circle"/&gt;
   &lt;/keyword&gt;
   &lt;tag id="draw-circle" hollow="yes"&gt;
    &lt;endl&gt;
     &lt;cpp&gt;Draw(c);&lt;/cpp&gt;
     &lt;java&gt;c.draw();&lt;/java&gt;
    &lt;/endl&gt;
   &lt;/tag&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

                </td><td></td><td valign="top">
<pre class="programlisting">





(1)


(2)




(2)




(2)




(2)





(3)






</pre>
                </td></tr></tbody></table></div><p>
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Declare an object with optional values.</li><li class="listitem">Set the color: either black, blue, red or green.</li><li class="listitem">Draw the circle with its color.</li></ol></div><p>
            </p><p>
            This example accepts the following command lines:
</p><pre class="programlisting">
add circle black
add circle blue
add circle red
add circle green
</pre><p>
            </p></div></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The <code class="sgmltag-attribute">max</code> attribute of <code class="sgmltag-element">tag</code> elements have been introduced in version 2.5.
        The CLI library does not implement it at present.
        It is only managed by the automatic documentation generation (see <a class="link" href="#xmlres.cli2help" title="4.9. Automatic documentation generation">Automatic documentation generation</a>),
        and should be implemented for real in latter versions of the library.
        This attribute may receive the <code class="sgmltag-attvalue">1</code> or the <code class="sgmltag-attvalue">unbounded</code> value.
        It indicates the maximum number of times this <code class="sgmltag-element">tag</code> link can be followed syntaxically speaking.
        All theoretical examples presented the <code class="sgmltag-attvalue">unbounded</code> value,
        the example below presents a regular use of the <code class="sgmltag-attvalue">1</code> value.
        </div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The CLI transformation is quite permissive regarding tags.
        There is no special restriction on
        whether you can reference a tag from anywhere in the syntax tree or not.
        However, the target language compiler or interpreter shall detecte non-sense situations afterwards.
        </div><div class="blockquote"><blockquote class="blockquote">
        Good!
        Now tell me.
        I have plenty of commands and I don't know how to organize my work.
        I could describe them with few keywords for each of them,
        but I'm afraid of having a wide choice at the root.
        So I've though about gathering sets of commands behind first keywords.
        What do you think about that?
        </blockquote></div><p>
        You're right!
        That's a possibility.
        But hold on!
        What you are looking for is probably menus.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.menu"></a>4.7. <code class="sgmltag-element">menu</code>
                - Classify user-defined command lines in menus</h3></div></div></div><p>
        The <code class="sgmltag-element">cli</code> element basically implements the main menu of a CLI interface.
        You may also define sub-menus, gathering sets of commands under a common topic by the way.
        Menus are then accessed through command lines.
        </p><p>
        A <code class="sgmltag-element">menu</code> element with a <code class="sgmltag-attribute">name</code> attribute defines a new menu.
        Inside, you can declare new command lines, as you would proceed in the <code class="sgmltag-element">cli</code> element.
        This <code class="sgmltag-element">menu</code> element can be placed:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">in a <code class="sgmltag-element">endl</code> element.
            The menu is directly available from the command it is attached to.</li><li class="listitem">in the <code class="sgmltag-element">cli</code> element.
            The menu is then referenced thanks to <code class="sgmltag-element">menu</code> elements
            with a <code class="sgmltag-attribute">ref</code> attribute
            in <code class="sgmltag-element">endl</code> elements.</li></ul></div><p>
        </p><p>
        It is now time to introduce the <span class="command"><strong>pwm</strong></span> command.
        If you have tried any example of this user guide, you may have noticed a basic command <span class="command"><strong>pwm</strong></span> meaning <acronym class="acronym">Print Working Menu</acronym>.
        The same way <span class="command"><strong>pwd</strong></span> gives you the working directory in a UNIX shells,
        this command gives you the current working menu, and the current stack of menus.
        </p><div class="example"><a name="eg.menu"></a><p class="title"><b>Example 20. Classify user-defined command lines in menus</b></p><div class="example-contents">
            Consider a CLI controlling a configuration.
            A common organization is to offer consultation commands in the main menu,
            and to reserve modification commands in an edition mode:
            <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">The <span class="command"><strong>edit config</strong></span> command leads to a <code class="sgmltag-attvalue">edit</code> sub-menu,
                thanks to the <code class="sgmltag-element">menu</code> element directly contained in the <code class="sgmltag-element">endl</code> element.</li><li class="listitem">The commands defined from the <code class="sgmltag-attvalue">edit</code> sub-menu are available
                only once the <span class="command"><strong>edit config</strong></span> has been entered.</li><li class="listitem">No need to define basic commands for menus.
                The <span class="command"><strong>pwm</strong></span> behaves as usual.
                The <span class="command"><strong>exit</strong></span> command allows the user to quit the current menu and come back to the parent one.
                The <span class="command"><strong>quit</strong></span> command directly quits the CLI.</li></ol></div><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">

                    
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="my-config"&gt;
 &lt;keyword string="show"&gt;
  &lt;keyword string="ip"&gt;
   &lt;keyword string="config"&gt;
    &lt;endl&gt;&lt;/endl&gt;
   &lt;/keyword&gt;
   &lt;keyword string="stats"&gt;
    &lt;endl&gt;&lt;/endl&gt;
   &lt;/keyword&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
 &lt;keyword string="edit"&gt;
  &lt;keyword string="config"&gt;
   &lt;endl&gt;
    &lt;menu name="edit"&gt;
     &lt;keyword string="set"&gt;
      &lt;keyword string="ip"&gt;
       &lt;keyword string="address"&gt;
        &lt;param type="host" id="addr"&gt;
         &lt;endl&gt;&lt;/endl&gt;
        &lt;/param&gt;
       &lt;/keyword&gt;
      &lt;/keyword&gt;
     &lt;/keyword&gt;
     &lt;keyword string="reset"&gt;
      &lt;keyword string="stats"&gt;
       &lt;endl&gt;&lt;/endl&gt;
      &lt;/keyword&gt;
     &lt;/keyword&gt;
    &lt;/menu&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>


                </td><td></td><td valign="top">
<pre class="programlisting">














(1)
(1) (3)




(2)






(2)







</pre>
                </td></tr></tbody></table></div></div></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        Advanced menu features are discussed in the advanced section.
        Please refer to the <a class="link" href="#adv.menus" title="6.2. Advanced menu management">Advanced menu management</a> section for more information.
        </div><div class="blockquote"><blockquote class="blockquote">
        Thank you for this detailed documentation.
        Do you provide a schema in order to check automatically this XML resource syntax?
        </blockquote></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.schema"></a>4.8. Schema checking</h3></div></div></div><p>
        This toolkit is provided with two schema files: <code class="filename">cli.xsd</code> and <code class="filename">cli.rng</code>.
        </p><p>
        <code class="filename">cli.xsd</code> is a regular W3C Xml Schema 1.0 file.
        Because of W3C limitations, some constraints are not checked with this Xml Schema:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="sgmltag-element">menu[@name]</code> / <code class="sgmltag-element">menu[@ref]</code>
            and <code class="sgmltag-element">tag[@id]</code> / <code class="sgmltag-element">tag[@ref]</code> elements distinction,</li><li class="listitem"><code class="sgmltag-element">menu</code> and <code class="sgmltag-element">tag</code> foreign key constraints.</li></ul></div><p>
        However <code class="filename">cli.xsd</code> can be used in order to have a first level of syntax checking.
        </p><div class="example"><a name="eg.xsd"></a><p class="title"><b>Example 21. Xml Schema validation</b></p><div class="example-contents"><pre class="programlisting">$ xmllint --schema ${CLI_DIR}/tools/cli.xsd --noout my-cli.xml
my-cli.xml validates</pre></div></div><br class="example-break"><p>
        <code class="filename">cli.rng</code> is a Relax NG schema.
        Relax NG permits the description of elements having the same name but different attributes,
        however it still does not cover all the constraints that should be checked:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="sgmltag-element">menu</code> names and <code class="sgmltag-element">tag</code> identifiers unicity,</li><li class="listitem"><code class="sgmltag-element">menu</code> and <code class="sgmltag-element">tag</code> foreign key constraints.</li></ul></div><p>
        But once again, <code class="filename">cli.rng</code> can be used in order to have a first level of syntax checking.
        </p><div class="example"><a name="eg.rng"></a><p class="title"><b>Example 22. Relax NG validation</b></p><div class="example-contents"><pre class="programlisting">$ xmllint --relaxng ${CLI_DIR}/tools/cli.rng --noout --noout my-cli.xml
my-cli.xml validates</pre></div></div><br class="example-break"><div class="blockquote"><blockquote class="blockquote">
        Great!
        Now I just have to document the CLI for my users.
        </blockquote></div><p>
        Automatic documentation generation may do part of the job for you then.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="xmlres.cli2help"></a>4.9. Automatic documentation generation</h3></div></div></div><p>
        Since version 2.5, the CLI toolkit is provided with a <code class="filename">cli2help.xsl</code> XSL stylesheet.
        And since version 2.8, a python tool equivalent <code class="filename">cli2help.py</code> is also provided.
        These tools generate CLI documentation automatically.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        As discussed in the <a class="link" href="#xslt" title="3.1. Transformation">Transformation</a> section
        for <code class="filename">cli2cpp.py</code> and <code class="filename">cli2java.py</code>,
        the python tool works better than the XSL stylesheets,
        but both technologies are still provided for backward compatibility reasons.
        </div><div class="example"><a name="eg.cli2help"></a><p class="title"><b>Example 23. <code class="filename">cli2help.xsl</code> / <code class="filename">cli2help.py</code> automatic documentation generation</b></p><div class="example-contents">
            Based on the following sample <a class="ulink" href="misc/clisample.xml" target="_top">clisample.xml</a> CLI XML resource file,
            the XSL transformation below automatically generates the given documentation <a class="ulink" href="misc/clisample.html" target="_top">clisample.html</a>.
            <pre class="programlisting">xsltproc ${CLI_DIR}/tools/cli2help.xsl clisample.xml &gt; clisample.html</pre>
            or:
            <pre class="programlisting">python ${CLI_DIR}/tools/cli2help.py clisample.xml &gt; clisample.html</pre></div></div><br class="example-break"><p>
        The XSL transformation stylesheet has several parameters:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="varname">STR_Lang</code>:
                    Documentation language. May be either 'en' or 'fr'. Default is 'en'.</li><li class="listitem"><code class="varname">B_GenerateToc</code>:
                    Table of content generation. 1 to enable. O to disable. Default is 1.</li><li class="listitem"><code class="varname">B_NumberTitles</code>:
                    Set chapter numbers to titles. 1 to enable. 0 to disable. Default is 1.</li></ul></div><p>
        </p><p>
        The python tool comes with a <code class="option">--help</code> option:
</p><pre class="programlisting">
$ python ${CLI_DIR}/tools/cli2help.py --help
usage: cli2help [-h] [--version] [--lang LANG] [--toc | --no-toc]
                [--title-numbers | --no-title-numbers]
                xml-res

positional arguments:
  xml-res             CLI XML resource file

optional arguments:
  -h, --help          show this help message and exit
  --version           show program's version number and exit
  --lang LANG         Language ('en', 'fr'...).
  --toc               Generate table of content.
  --no-toc            Do not generate table of content.
  --title-numbers     Generate titles with their number.
  --no-title-numbers  Generate titles with no number.
</pre><p>
        </p><p>
        This documentation generation is not as clever as a human being,
        therefore here is a couple of directions in order to generate a smart documentation:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">The documentation generation consider backward and forward tags.
            Backward tags basically implement non mandatory options, and are presented <span class="command"><strong>[this way]</strong></span>.
            Forward tags implement mandatory options following <span class="command"><strong>a(b1|b2)c</strong></span> patterns.
            <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">Avoid exotic tag nesting, in order to let the tools have a simple understanding of the organization of the options.
                Please refer to the <a class="link" href="#xmlres.tag" title="4.6. tag - How to make jumps in the syntax tree"><code class="sgmltag-element">tag</code></a> section
                for the implementation of such regular patterns.
            </li></ul></div></li><li class="listitem">Commands are found back, being processed backwardly, from their <code class="sgmltag-element">endl</code> final elements.
            <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">Check the number of <code class="sgmltag-element">endl</code> elements you declare for a single human-understandable command.
                Let's consider two command lines <span class="command"><strong>say hello</strong></span> and <span class="command"><strong>say bye</strong></span>,
                they may be considered like two different command lines,
                or rather like a single one with a mandatory parameter <span class="command"><strong>say (hello|bye)</strong></span>.
                It's up to you to choose which presentation is better, and use <code class="sgmltag-element">tag</code> elements when needed.
            </li><li class="listitem">Some commands are documented with <code class="sgmltag-element">help</code> elements for each syntax node,
                but the final syntax node help may be not enough representative for a user documentation.
                In such a situation, use a dummy tag at the end of the command line, in order to force the help for a given command.
                Dummy tags are <code class="sgmltag-element">tag</code> elements with a <code class="sgmltag-attribute">id</code> attribute,
                but no reference from the rest of the CLI XML resource file.
                Dummy tags can be documented with <code class="sgmltag-element">help</code> elements as well,
                but this help has no effect during the CLI execution.
            </li></ul></div></li></ul></div><p>
        </p></div><div class="blockquote"><blockquote class="blockquote">
    Very good.
    Now I'm getting back to making the user enter data out of command line editions.
    You told me we would deal with it?
    </blockquote></div><p>
    Here we go!
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ui"></a>5. UI controls</h2></div></div></div><p>
    The CLI library also provides a set of classes that helps displaying long texts or making the user enter additional data.
    These classes are scoped in a <span class="package">ui</span> namespace.
    </p><div class="informalfigure"><a name="fig.ui.classes"></a><div class="mediaobject"><img src="../doxygen/html/classUI__inherit__graph.png" alt="UI controls: class hierarchy"><div class="caption">UI controls: class hierarchy</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.line"></a>5.1. <code class="classname">Line</code></h3></div></div></div><p>
        Make the user enter a single text line on request,
        with regular text edition facilities:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">left and right arrows,</li><li class="listitem">HOME and END keys,</li><li class="listitem">backward and forward deletion,</li><li class="listitem">insert and replace modes,</li></ul></div><p>
        plus other features:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">default answer,</li><li class="listitem">min / max string length constraints...</li></ul></div><p>
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classLine.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/Line.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        </p><div class="example"><a name="eg.ui.line"></a><p class="title"><b>Example 24. UI controls - <code class="classname">ui.Line</code></b></p><div class="example-contents"><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_line.h"&lt;/cpp&gt;
 &lt;keyword string="enter"&gt;
  &lt;keyword string="line"&gt;
   &lt;endl&gt;
    &lt;!-- C++ implementation --&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Enter line: ";&lt;/cpp&gt;
    &lt;cpp&gt;cli::ui::Line ui_Line(GetShell(), cli::tk::String(10, ""), 0, 1024);&lt;/cpp&gt;
    &lt;cpp&gt;ui_Line.Run();&lt;/cpp&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "User entered '" &lt;&lt; ui_Line.GetLine() &lt;&lt; "'" &lt;&lt; cli::endl;&lt;/cpp&gt;
    &lt;!-- Java implementation --&gt;
    &lt;java&gt;&lt;out/&gt;.put("Enter line: ");&lt;/java&gt;
    &lt;java&gt;cli.ui.Line ui_Line = new cli.ui.Line(getShell(), "", 0, 1024);&lt;/java&gt;
    &lt;java&gt;ui_Line.run();&lt;/java&gt;
    &lt;java&gt;&lt;out/&gt;.put("User entered '" + ui_Line.getLine() + "'").endl();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;enter line
Enter line: Hello world
User entered 'Hello world'
UI&gt;
</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.password"></a>5.2. <code class="classname">Password</code></h3></div></div></div><p>
        Same as above, but without displaying the text. Either nothing is displayed or only stars.
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classPassword.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/Password.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        </p><div class="example"><a name="eg.ui.password"></a><p class="title"><b>Example 25. UI controls - <code class="classname">ui.Password</code></b></p><div class="example-contents"><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_password.h"&lt;/cpp&gt;
 &lt;keyword string="enter"&gt;
  &lt;keyword string="password"&gt;
   &lt;endl&gt;
    &lt;!-- C++ implementation --&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Enter password: ";&lt;/cpp&gt;
    &lt;cpp&gt;cli::ui::Password ui_Password(GetShell(), true, 0, 1024);&lt;/cpp&gt;
    &lt;cpp&gt;ui_Password.Run();&lt;/cpp&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "User entered '" &lt;&lt; ui_Password.GetPassword() &lt;&lt; "'" &lt;&lt; cli::endl;&lt;/cpp&gt;
    &lt;!-- Java implementation --&gt;
    &lt;java&gt;&lt;out/&gt;.put("Enter password: ");&lt;/java&gt;
    &lt;java&gt;cli.ui.Password ui_Password = new cli.ui.Password(getShell(), true, 0, 1024);&lt;/java&gt;
    &lt;java&gt;ui_Password.run();&lt;/java&gt;
    &lt;java&gt;&lt;out/&gt;.put("User entered '" + ui_Password.getPassword() + "'").endl();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;enter password
Enter password: *****
User entered 'hello'
UI&gt;
</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.int"></a>5.3. <code class="classname">Int</code></h3></div></div></div><p>
        Let the user enter an integer number.
        The <code class="classname">Int</code> class provides default value, plus min and max checkers.
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classInt.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/Int.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        </p><div class="example"><a name="eg.ui.int"></a><p class="title"><b>Example 26. UI controls - <code class="classname">ui.Int</code></b></p><div class="example-contents"><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_int.h"&lt;/cpp&gt;
 &lt;keyword string="enter"&gt;
  &lt;keyword string="int"&gt;
   &lt;endl&gt;
    &lt;!-- C++ implementation --&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Enter integer number: ";&lt;/cpp&gt;
    &lt;cpp&gt;cli::ui::Int ui_Int(GetShell(), 0, -1000, 1000);&lt;/cpp&gt;
    &lt;cpp&gt;ui_Int.Run();&lt;/cpp&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "User entered " &lt;&lt; ui_Int.GetInt() &lt;&lt; cli::endl;&lt;/cpp&gt;
    &lt;!-- Java implementation --&gt;
    &lt;java&gt;&lt;out/&gt;.put("Enter integer number: ");&lt;/java&gt;
    &lt;java&gt;cli.ui.Int ui_Int = new cli.ui.Int(getShell(), 0, -1000, 1000);&lt;/java&gt;
    &lt;java&gt;ui_Int.run();&lt;/java&gt;
    &lt;java&gt;&lt;out/&gt;.put("User entered " + ui_Int.getInt()).endl();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;enter int
Enter integer number: 107
User entered 107
UI&gt;
</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.float"></a>5.4. <code class="classname">Float</code></h3></div></div></div><p>
        Let the user enter a floating point number.
        The <code class="classname">Float</code> class provides default value, plus min and max checkers.
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classFloat.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/Float.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        </p><div class="example"><a name="eg.ui.float"></a><p class="title"><b>Example 27. UI controls - <code class="classname">ui.Float</code></b></p><div class="example-contents"><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_float.h"&lt;/cpp&gt;
 &lt;keyword string="enter"&gt;
  &lt;keyword string="float"&gt;
   &lt;endl&gt;
    &lt;!-- C++ implementation --&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Enter floating point number: ";&lt;/cpp&gt;
    &lt;cpp&gt;cli::ui::Float ui_Float(GetShell(), 0, - 1000.0, 1000.0);&lt;/cpp&gt;
    &lt;cpp&gt;ui_Float.Run();&lt;/cpp&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "User entered " &lt;&lt; ui_Float.GetFloat() &lt;&lt; cli::endl;&lt;/cpp&gt;
    &lt;!-- Java implementation --&gt;
    &lt;java&gt;&lt;out/&gt;.put("Enter floating point number: ");&lt;/java&gt;
    &lt;java&gt;cli.ui.Float ui_Float = new cli.ui.Float(getShell(), 0, -1000.0, 1000.0);&lt;/java&gt;
    &lt;java&gt;ui_Float.run();&lt;/java&gt;
    &lt;java&gt;&lt;out/&gt;.put("User entered " + ui_Float.getFloat()).endl();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;enter float
Enter floating point number: -3.14
User entered -3.14
UI&gt;
</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.yesno"></a>5.5. <code class="classname">YesNo</code></h3></div></div></div><p>
        Let the user answer "yes/no" questions.
        "Yes/no" questions are nothing but multiple choice questions with "yes" or "no" for choices.
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classYesNo.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/YesNo.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        </p><div class="example"><a name="eg.ui.yesno"></a><p class="title"><b>Example 28. UI controls - <code class="classname">ui.YesNo</code></b></p><div class="example-contents"><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_yesno.h"&lt;/cpp&gt;
 &lt;keyword string="enter"&gt;
  &lt;keyword string="yesno"&gt;
   &lt;endl&gt;
    &lt;!-- C++ implementation --&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Please select [YES/no]: ";&lt;/cpp&gt;
    &lt;cpp&gt;cli::ui::YesNo ui_YesNo(GetShell(), true);&lt;/cpp&gt;
    &lt;cpp&gt;ui_YesNo.Run();&lt;/cpp&gt;
    &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "User entered " &lt;&lt; (ui_YesNo.GetYesNo() ? "true" : "false") &lt;&lt; "/'" &lt;&lt; ui_YesNo.GetstrChoice().GetString(GetShell().GetLang()) &lt;&lt; "'" &lt;&lt; cli::endl;&lt;/cpp&gt;
    &lt;!-- Java implementation --&gt;
    &lt;java&gt;&lt;out/&gt;.put("Please select [YES/no]: ");&lt;/java&gt;
    &lt;java&gt;cli.ui.YesNo ui_YesNo = new cli.ui.YesNo(getShell(), true);&lt;/java&gt;
    &lt;java&gt;ui_YesNo.run();&lt;/java&gt;
    &lt;java&gt;&lt;out/&gt;.put("User entered " + ui_YesNo.getYesNo() + "/'" + ui_YesNo.getstrChoice().getString(getShell().getLang()) + "'").endl();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;enter yesno
Please select [YES/no]: No
User entered false/'No'
UI&gt;
</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.choice"></a>5.6. <code class="classname">Choice</code></h3></div></div></div><p>
        Let the user answer multiple choice questions.
        Either the user types directly the choice himself/herself (auto-completion is provided),
        or he/she can use UP and DOWN keys to move from one choice to the other.
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classChoice.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/Choice.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        </p><div class="example"><a name="eg.ui.choice"></a><p class="title"><b>Example 29. UI controls - <code class="classname">ui.Choice</code></b></p><div class="example-contents"><pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_choice.h"&lt;/cpp&gt;
 &lt;cpp option="include"&gt;#include "cli/string_device.h"&lt;/cpp&gt;
 &lt;keyword string="enter"&gt;
  &lt;keyword string="choice"&gt;
   &lt;param type="int" id="count"&gt;
    &lt;endl&gt;
     &lt;!-- C++ implementation --&gt;
     &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Select choice: ";&lt;/cpp&gt;
     &lt;cpp&gt;cli::tk::Queue&lt;cli::ResourceString&gt; tk_Choices(&lt;value-of param="count"/&gt;);&lt;/cpp&gt;
     &lt;cpp&gt;for (int i=0; i&lt;&lt;value-of param="count"/&gt;; i++) {&lt;/cpp&gt;
     &lt;cpp&gt;    cli::StringDevice cli_Choice(1024, false); cli_Choice &lt;&lt; "Choice#" &lt;&lt; (i + 1);&lt;/cpp&gt;
     &lt;cpp&gt;    tk_Choices.AddTail(cli::ResourceString().SetString(cli::ResourceString::LANG_EN, cli_Choice.GetString()));&lt;/cpp&gt;
     &lt;cpp&gt;}&lt;/cpp&gt;
     &lt;cpp&gt;cli::ui::Choice ui_Choice(GetShell(), 0, tk_Choices);&lt;/cpp&gt;
     &lt;cpp&gt;ui_Choice.Run();&lt;/cpp&gt;
     &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "User entered " &lt;&lt; ui_Choice.GetChoice() &lt;&lt; "/'" &lt;&lt; ui_Choice.GetstrChoice().GetString(GetShell().GetLang()) &lt;&lt; "'" &lt;&lt; cli::endl;&lt;/cpp&gt;
     &lt;!-- Java implementation --&gt;
     &lt;java&gt;&lt;out/&gt;.put("Select choice: ");&lt;/java&gt;
     &lt;java&gt;java.util.Vector&lt;cli.ResourceString&gt; j_Choices = new java.util.Vector&lt;cli.ResourceString&gt;();&lt;/java&gt;
     &lt;java&gt;for (int i=0; i&lt;&lt;value-of param="count"/&gt;; i++) {&lt;/java&gt;
     &lt;java&gt;    j_Choices.add(new cli.ResourceString().setString(cli.ResourceString.LANG_EN, "Choice#" + (i + 1)));&lt;/java&gt;
     &lt;java&gt;}&lt;/java&gt;
     &lt;java&gt;cli.ui.Choice ui_Choice = new cli.ui.Choice(getShell(), 0, j_Choices);&lt;/java&gt;
     &lt;java&gt;ui_Choice.run();&lt;/java&gt;
     &lt;java&gt;&lt;out/&gt;.put("User entered " + ui_Choice.getChoice() + "/'" + ui_Choice.getstrChoice().getString(getShell().getLang()) + "'").endl();&lt;/java&gt;
    &lt;/endl&gt;
   &lt;/param&gt;
  &lt;/keyword&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;enter choice 10
Select choice: Choice#6
User entered 5/'Choice#6'
UI&gt;
</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.more"></a>5.7. <code class="classname">More</code></h3></div></div></div><p>
        Display long text, page by page, as a regular "more" display:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">the display stops when the text is more than one page long,</li><li class="listitem">pressing ENTER moves the display one line forward,</li><li class="listitem">pressing the SPACE bar moves the display one page forward,</li><li class="listitem">pressing the 'q' key makes the display stop and get back to the regular CLI.</li></ul></div><p>
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classMore.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/More.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        Basically, the text is prepared in the <code class="classname">OutputDevice</code> text member,
        then the <code class="classname">More</code> execution is invoked for text display.
        </p><div class="example"><a name="eg.ui.more"></a><p class="title"><b>Example 30. UI controls - <code class="classname">ui.More</code></b></p><div class="example-contents">
            C++ code:
                <pre class="programlisting">static void FillText(const cli::OutputDevice&amp; CLI_UI, const unsigned int UI_Count) {
    for (unsigned int i=1; (i&lt;=UI_Count) &amp;&amp; (i&lt;1024); i++) {
        CLI_UI &lt;&lt; i &lt;&lt; ": ";
        for (unsigned int j=1; j&lt;=i; j++) CLI_UI &lt;&lt; "*";
        CLI_UI &lt;&lt; cli::endl;
    }
}
</pre>
            Java code:
                <pre class="programlisting">public class UISampleText {
    public static void fillText(cli.OutputDevice.Interface CLI_UI, int I_Count) {
        for (int i=1; (i&lt;=I_Count) &amp;&amp; (i&lt;1024); i++) {
            CLI_UI.put(i + ": ");
            for (int j=1; j&lt;=i; j++) CLI_UI.put("*");
            CLI_UI.endl();
        }
    }
}
</pre>
            CLI XML resource file:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_more.h"&lt;/cpp&gt;
 &lt;cpp option="include"&gt;#include "ui_sample_text.h"&lt;/cpp&gt;
 &lt;keyword string="more"&gt;
  &lt;param type="int" id="count"&gt;
   &lt;endl&gt;
    &lt;!-- C++ implementation --&gt;
    &lt;cpp&gt;cli::ui::More ui_More(GetShell(), 1024, &lt;value-of param="count"/&gt;);&lt;/cpp&gt;
    &lt;cpp&gt;FillText(ui_More.GetText(), &lt;value-of param="count"/&gt;);&lt;/cpp&gt;
    &lt;cpp&gt;ui_More.Run();&lt;/cpp&gt;
    &lt;!-- Java implementation --&gt;
    &lt;java&gt;cli.ui.More ui_More = new cli.ui.More(getShell());&lt;/java&gt;
    &lt;java&gt;UISampleText.fillText(ui_More.getText(), &lt;value-of param="count"/&gt;);&lt;/java&gt;
    &lt;java&gt;ui_More.run();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/param&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;more 100
1: *
2: **
3: ***
4: ****
5: *****
6: ******
7: *******
8: ********
9: *********
10: **********
11: ***********
12: ************
13: *************
14: **************
15: ***************
16: ****************
17: *****************
18: ******************
19: *******************
--- More ---
</pre>
            Pressing ENTER discards the wait message,
            displays one more line,
            and eventually prints out the wait message again:
<pre class="programlisting">
20: ********************
--- More ---
</pre>
            Pressing the SPACE bar discards the wait message,
            displays one more page,
            and eventually prints out the wait message again:
<pre class="programlisting">
21: *********************
22: **********************
23: ***********************
24: ************************
25: *************************
26: **************************
27: ***************************
28: ****************************
29: *****************************
30: ******************************
31: *******************************
32: ********************************
33: *********************************
34: **********************************
35: ***********************************
36: ************************************
37: *************************************
38: **************************************
39: ***************************************
--- More ---
</pre>
            Pressing the 'q' key discards the wait message and gets the user back to the regular CLI execution:
<pre class="programlisting">
UI&gt;
</pre></div></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The size of the page is determined from screen characteristics.
        Please refer to the apropriate <a class="link" href="#adv.iodevices" title="6.5. Define your own input/output device">section</a> if you implement your own input/output device.
        </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="ui.less"></a>5.8. <code class="classname">Less</code></h3></div></div></div><p>
        Display long text, page by page, as a regular "less" display:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">the display stops when the text is more than one page long,</li><li class="listitem">pressing the PAGE UP key moves the display one page backward,</li><li class="listitem">pressing the UP key moves the display one line backward,</li><li class="listitem">pressing ENTER or the DOWN key moves the display one line forward,</li><li class="listitem">pressing the SPACE bar or the PAGE DOWN key moves the display one page forward,</li><li class="listitem">pressing the 'q' key makes the display stop and get back to the regular CLI.</li></ul></div><p>
        </p><p>
        Check <a class="ulink" href="../doxygen/html/classLess.html" target="_top"><code class="classname">C++ doxygen</code></a>
        or <a class="ulink" href="../javadoc/html/cli/ui/Less.html" target="_top"><code class="classname">javadoc</code></a> documentations
        for details on programming interfaces.
        A <code class="classname">Less</code> object is prepared the same as a <code class="classname">More</code> object (see <a class="link" href="#ui.more" title="5.7. More">previous section</a>).
        </p><div class="example"><a name="eg.ui.less"></a><p class="title"><b>Example 31. UI controls - <code class="classname">ui.Less</code></b></p><div class="example-contents">
            CLI XML resource file:
                
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="UI"&gt;
 &lt;cpp option="include"&gt;#include "cli/ui_less.h"&lt;/cpp&gt;
 &lt;cpp option="include"&gt;#include "ui_sample_text.h"&lt;/cpp&gt;
 &lt;keyword string="less"&gt;
  &lt;param type="int" id="count"&gt;
   &lt;endl&gt;
    &lt;!-- C++ implementation --&gt;
    &lt;cpp&gt;cli::ui::Less ui_Less(GetShell(), 80, &lt;value-of param="count"/&gt;);&lt;/cpp&gt;
    &lt;cpp&gt;FillText(ui_Less.GetText(), &lt;value-of param="count"/&gt;);&lt;/cpp&gt;
    &lt;cpp&gt;ui_Less.Run();&lt;/cpp&gt;
    &lt;!-- Java implementation --&gt;
    &lt;java&gt;cli.ui.Less ui_Less = new cli.ui.Less(getShell());&lt;/java&gt;
    &lt;java&gt;UISampleText.fillText(ui_Less.getText(), &lt;value-of param="count"/&gt;);&lt;/java&gt;
    &lt;java&gt;ui_Less.run();&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/param&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre>

            The code above produces the following output:
<pre class="programlisting">
UI&gt;less 100
1: *
2: **
3: ***
4: ****
5: *****
6: ******
7: *******
8: ********
9: *********
10: **********
11: ***********
12: ************
13: *************
14: **************
15: ***************
16: ****************
17: *****************
18: ******************
19: *******************
:
</pre>
            Pressing ENTER cleans the screen and prints it again, one line forward:
<pre class="programlisting">
2: **
3: ***
4: ****
5: *****
6: ******
7: *******
8: ********
9: *********
10: **********
11: ***********
12: ************
13: *************
14: **************
15: ***************
16: ****************
17: *****************
18: ******************
19: *******************
20: ********************
:
</pre>
            Pressing the 'q' key discards the wait message and gets the user back to the regular CLI execution:
<pre class="programlisting">
UI&gt;
</pre></div></div><br class="example-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        As for a "more" display, the size of the page is determined from screen characteristics.
        </div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        Please note that <code class="classname">Less</code> display also depends on the implementation of the "clean screen" feature.
        If cleaning the screen is nothing but the default implementation (a couple of blank lines printed out),
        a simple <code class="classname">More</code> display may be preferrable then.
        Therefore, it might be a good idea to check the "has true cls" screen characteristic
        (see <a class="ulink" href="../doxygen/html/classOutputDevice_1_1ScreenInfo.html#85446e0c4d94e4d8aeb75722d0c2b26d" target="_top">doxygen</a>
         or <a class="ulink" href="../javadoc/html/cli/OutputDevice.ScreenInfo.html#hasTrueCls()" target="_top">javadoc</a>)
        before using a <code class="classname">Less</code> object.
        If the current output device does not implement an efficient "clean screen" feature, then you shall use a <code class="classname">More</code> object instead.
        </div></div><div class="blockquote"><blockquote class="blockquote">
    Well! So far, I think I can do almost everything whith XML resource files and UI classes.
    I'll manage with it now.
    </blockquote></div><p>
    So good luck.
    Wish you lots of fun.
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="adv"></a>6. Advanced</h2></div></div></div><p>
    Some of you may have special needs.
    Here is some additional information for advanced users.
    </p><p>
    Many topics are illustrated either with C++ code or Java code,
    but please note that they are generally applicable to both languages:
    just transpose the C++/Java class names to the corresponding Java/C++ classes.
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.telnet"></a>6.1. Telnet</h3></div></div></div><p>
        Let's start with telnet implementation.
        The CLI library provides <code class="classname">TelnetServer</code> and <code class="classname">TelnetConnection</code> classes.
        These classes allow you to easily make your CLI run with network connections.
        </p><div class="example"><a name="eg.telnet"></a><p class="title"><b>Example 32. Simple telnet server</b></p><div class="example-contents"><p>
            First of all, inherit from <code class="classname">TelnetServer</code>.
            All you have to do is to override
            <code class="function">onNewConnection</code> to allocate resources for new network connections,
            and <code class="function">onCloseConnection</code> to free them when the thing is done. 
</p><pre class="programlisting">
class MyServer extends cli.TelnetServer {
    public MyServer() {
        // Up to 10 clients on port 9012.
        super(10, 9012, cli.ResourceString.LANG_EN);
    }
    protected cli.ExecutionContext.Interface onNewConnection(cli.TelnetConnection CLI_NewConnection) {
        // Create CLI and Shell instances for that new connection.
        cli.Cli cli_Cli = new MyCli();
        cli.Shell cli_Shell = new cli.Shell(cli_Cli);
        return cli_Shell;
    }
    protected void onCloseConnection(cli.TelnetConnection CLI_ConnectionClosed, cli.ExecutionContext.Interface CLI_Context) {
        // Free connection resources: the garbage collector does the thing for us in Java.
        // Note: CLI_Context corresponds to the cli.Shell instance we have created in onNewConnection().
    }
}
</pre><p>
            </p><p>
            Eventually call <code class="function">startServer</code> and that's it.
</p><pre class="programlisting">
MyServer cli_Server = new MyServer();
cli_Server.startServer(); // Blocking call
</pre><p>
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            The <code class="classname">TelnetServer</code> and <code class="classname">TelnetConnection</code> interfaces have been modified in 2.7 and 2.8 consequent versions.
            Sorry if those changes disturb integrations of some of your software with prior versions of the library,
            but note that the motivation for those modifications is real improvements:
            </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">CLI 2.7 improvements</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Redesign of <code class="classname">TelnetConnection</code>, made as <a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">non blocking</a>
                        for a better management of parallel connections.</li><li class="listitem">Redesign of <code class="classname">TelnetServer</code>, made virtual,
                        so that the user software can create as many shells and clis for each connection.</li></ul></div></dd><dt><span class="term">CLI 2.8 improvements</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Redesign again of <code class="classname">TelnetServer</code>, due to <a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">execution contexts improvements </a>,
                        so that the user software can create shells and clis, but also any other kind of execution contexts.</li></ul></div></dd></dl></div><p>
            </p></div><p>
            Start your server, and connect to it thanks to <span class="application">teraterm</span> for instance:
                </p><div class="informalfigure"><a name="fig.telnet.teraterm"></a><div class="mediaobject"><img src="misc/tterm-telnet.png" alt="teraterm telnet settings."><div class="caption"><span class="application">teraterm</span> telnet settings</div></div></div><p>
            </p></div></div><br class="example-break"><p>
        If you need the server not to be blocking for your application,
        up to you to thread the thing.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.menus"></a>6.2. Advanced menu management</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="adv.menus.handlers"></a>6.2.1. <code class="sgmltag-element">handler</code>
                    - <code class="sgmltag-element">menu</code> elements special features</h4></div></div></div><p>
            <code class="sgmltag-element">menu</code> elements may be provided with <code class="sgmltag-element">handler</code> elements.
            These <code class="sgmltag-element">handler</code> elements allow you to trigger native code on certain events.
            </p><p>
            The CLI library manages three kinds of handlers:
            </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="sgmltag-attvalue">error</code></span></dt><dd><code class="sgmltag-attvalue">error</code> handlers are available on the root <code class="sgmltag-element">cli</code> element,
                    and are called when the CLI library displays an error.
                    This can be useful when writing CLI-based compilers, trapping syntax errors by the way.
                    <code class="sgmltag-attvalue">error</code> handlers return a boolean value: <code class="code">false</code> disables the regular error display.
                </dd><dt><span class="term"><code class="sgmltag-attvalue">exit</code></span></dt><dd><code class="sgmltag-attvalue">exit</code> handlers are called when the menu exits.
                    When the CLI quits, the shell calls <code class="sgmltag-attvalue">exit</code> handlers for each menu in the current stack of menus.
                </dd><dt><span class="term"><code class="sgmltag-attvalue">prompt</code></span></dt><dd><code class="sgmltag-attvalue">prompt</code> handlers must return a string.
                    They allow the user application to dynamically change the prompt for the menu,
                    depending on the current state of the application.
                    This can be useful when writing configuration menus, for several items, with the same set of commands.
                    Instead of copy/paste the menu, just changing the name of it, for each item,
                    you may use the same menu with a <code class="sgmltag-attvalue">prompt</code> handler.
                </dd></dl></div><p>
            </p><div class="example"><a name="eg.menus.handlers"></a><p class="title"><b>Example 33. Menu handlers</b></p><div class="example-contents">
                The example below contains one main menu and a sub-menu:
                <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">The main menu contains a <code class="sgmltag-attvalue">error</code> handler.
                        The code attached is called each time the CLI displays an error.
                        The parameters <code class="varname">location</code> and <code class="varname">message</code> are provided and may be used.</li><li class="listitem">Both menus contain a <code class="sgmltag-attvalue">exit</code> handler.
                        The code attached is called whenever the menus exit respectively.</li><li class="listitem">Both menus contain a <code class="sgmltag-attvalue">prompt</code> handler.
                        The one for the main menu does nothing as far as it returns an empty string.
                        The one for the sub-menu however changes the prompt of it,
                        depending on the <code class="sgmltag-attvalue">menu-id</code> parameter value set previously.</li></ol></div><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">

                        
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="menu-handler"&gt;
 &lt;cpp option="include"&gt;#include "cli/string_device.h"&lt;/cpp&gt;
 &lt;cpp option="head"&gt;static int MenuId = 0;&lt;/cpp&gt;
 &lt;java option="import"&gt;class Global { public static int menuId = 0; }&lt;/java&gt;
 &lt;keyword string="menu"&gt;
  &lt;param id="menu-id" type="int"&gt;
   &lt;endl&gt;
    &lt;cpp&gt;MenuId = &lt;value-of param="menu-id"/&gt;;&lt;/cpp&gt;
    &lt;java&gt;Global.menuId = &lt;value-of param="menu-id"/&gt;;&lt;/java&gt;


    &lt;menu name="menu#"&gt;
     &lt;handler name="exit"&gt;
      &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Leaving 'menu#" &lt;&lt; MenuId &lt;&lt; "' menu" &lt;&lt; cli::endl;&lt;/cpp&gt;
      &lt;cpp&gt;MenuId = 0;&lt;/cpp&gt;
      &lt;java&gt;&lt;out/&gt;.put("Leaving 'menu#" + Global.menuId + "' menu").endl();&lt;/java&gt;
      &lt;java&gt;Global.menuId = 0;&lt;/java&gt;
     &lt;/handler&gt;
     &lt;handler name="prompt"&gt;
      &lt;cpp&gt;cli::StringDevice s(20, false);&lt;/cpp&gt;
      &lt;cpp&gt;s &lt;&lt; "menu#" &lt;&lt; MenuId;&lt;/cpp&gt;
      &lt;cpp&gt;return s.GetString();&lt;/cpp&gt;
      &lt;java&gt;return ("menu#" + Global.menuId);&lt;/java&gt;
     &lt;/handler&gt;
    &lt;/menu&gt;
   &lt;/endl&gt;
  &lt;/param&gt;
 &lt;/keyword&gt;

 &lt;handler name="error"&gt;
  &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Error detected: ";&lt;/cpp&gt;
  &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "location = " &lt;&lt; location.GetString(GetShell().GetLang()) &lt;&lt; ", ";&lt;/cpp&gt;
  &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "message = " &lt;&lt; message.GetString(GetShell().GetLang()) &lt;&lt; cli::endl;&lt;/cpp&gt;
  &lt;cpp&gt;return (MenuId == 0);&lt;/cpp&gt;
  &lt;java&gt;&lt;out/&gt;.put("Error detected: ");&lt;/java&gt;
  &lt;java&gt;&lt;out/&gt;.put("location = " + location.getString(getShell().getLang()) + ", ");&lt;/java&gt;
  &lt;java&gt;&lt;out/&gt;.put("message = " + message.getString(getShell().getLang())).endl();&lt;/java&gt;
  &lt;java&gt;return (Global.menuId == 0);&lt;/java&gt;
 &lt;/handler&gt;
 &lt;handler name="exit"&gt;
  &lt;cpp&gt;&lt;out/&gt; &lt;&lt; "Leaving 'menu-handler' menu" &lt;&lt; cli::endl;&lt;/cpp&gt;
  &lt;java&gt;&lt;out/&gt;.put("Leaving 'menu-handler' menu").endl();&lt;/java&gt;
 &lt;/handler&gt;
 &lt;handler name="prompt"&gt;
  &lt;cpp&gt;return cli::tk::String(0);&lt;/cpp&gt;
  &lt;java&gt;return "";&lt;/java&gt;
 &lt;/handler&gt;
&lt;/cli&gt;
</pre>


                    </td><td></td><td valign="top">
<pre class="programlisting">













(2)





(3)










(1)









(2)



(3)




</pre>
                    </td></tr></tbody></table></div></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="adv.menus.cpp"></a>6.2.2. <code class="sgmltag-element">menu</code> element management from native code</h4></div></div></div><p>
            It is sometime useful to let the user application decide whether a menu should be entered or not.
            </p><p>
            Let's explain the need with an example.
            Imagine the case of a command line leading to the configuration menu of network interfaces.
            Such a command line would contain a string parameter so that the user can give the name of the network interface to configure.
            When using a <code class="sgmltag-element">menu</code> element,
            the menu would automatically be entered,
            even though we face a troublesome situation, such as a wrong interface name for instance.
            However, basically, when the user types in a wrong interface name,
            we would rather expect the application to print out an error message and <span class="emphasis"><em>not</em></span> enter the configuration menu.
            </p><p>
            The example below explains how to implement such behaviour:
            </p><div class="example"><a name="eg.menus.cpp"></a><p class="title"><b>Example 34. Menu management from native code</b></p><div class="example-contents">
                The example below contains one main menu and a sub-menu,
                however the sub-menu is not directly accessed thanks to a <code class="sgmltag-element">menu</code> element.
                Native code methods are used instead:
                <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">Depending on a condition, the C++ <code class="function">cli::Shell::EnterMenu</code> method is called.
                        The <code class="function">cli::Cli::GetMenu</code> method is used in order to retrieve the given <code class="classname">cli::Menu</code> reference.</li><li class="listitem">The same thing can be done for Java, thanks to the <code class="function">cli.Shell.enterMenu</code> and <code class="function">cli.Cli.getMenu</code> methods.</li><li class="listitem">An error message is displayed when the menu cannot be entered.</li></ol></div><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td valign="top">
<pre class="programlisting">





,--
|
+--
|
|
|
|
|
`-&gt;


</pre>
                    </td><td></td><td valign="top">

                        
<pre class="programlisting">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="menu-cpp"&gt;
 &lt;keyword string="menu"&gt;
  &lt;param id="menu-id" type="int"&gt;
   &lt;endl&gt;
    &lt;cpp&gt;if (&lt;value-of param="menu-id"/&gt; &gt;= 0) { GetShell().EnterMenu(* GetCli().GetMenu("sub-menu"), false); }&lt;/cpp&gt;
    &lt;cpp&gt;else { &lt;err/&gt; &lt;&lt; "Invalid menu identifier " &lt;&lt; &lt;value-of param="menu-id"/&gt; &lt;&lt; cli::endl; }&lt;/cpp&gt;
    &lt;java&gt;if (&lt;value-of param="menu-id"/&gt; &gt;= 0) { getShell().enterMenu(getCli().getMenu("sub-menu"), false); }&lt;/java&gt;
    &lt;java&gt;else { &lt;err/&gt;.put("Invalid menu identifier " + &lt;value-of param="menu-id"/&gt;).endl(); }&lt;/java&gt;
   &lt;/endl&gt;
  &lt;/param&gt;
 &lt;/keyword&gt;

 &lt;menu name="sub-menu"&gt;
 &lt;/menu&gt;
&lt;/cli&gt;
</pre>


                    </td><td></td><td valign="top">
<pre class="programlisting">





(1)
(3)
(2)
(3)







</pre>
                    </td></tr></tbody></table></div></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.shellfeatures"></a>6.3. <code class="classname">Shell</code> advanced features</h3></div></div></div><p>
        The features described in the table below are available from native code.
        Please refer to <span class="productname">doxygen</span> or <span class="productname">javadoc</span> documentation for additional information.
        </p><div class="table"><a name="table.shellfeatures"></a><p class="title"><b>Table 1. <code class="classname">Shell</code> advanced features</b></p><div class="table-contents"><table summary="Shell advanced features" border="1"><colgroup><col align="left" class="description"><col align="left" class="cpp"><col align="left" class="java"></colgroup><thead><tr><th align="left">Description</th><th align="left">C++</th><th align="left">Java</th></tr></thead><tbody><tr><td colspan="3" align="left">Input / output management</td></tr><tr><td align="left">Input stream access</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#add8486199a73f2bb56830ed003dcb321" target="_top"><code class="function">ExecutionContext::GetInput</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#getInput()" target="_top"><code class="function">ExecutionContext.Interface.getInput</code></a></td></tr><tr><td align="left">Output stream access</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#a6fd7a732424cb3fd253079bbf704ebef" target="_top"><code class="function">ExecutionContext::GetStream</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#getStream(int)" target="_top"><code class="function">ExecutionContext.Interface.getStream</code></a></td></tr><tr><td align="left">Output stream positioning</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#aaf750f141101e90f2c78cb35fe825605" target="_top"><code class="function">ExecutionContext::SetStream</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#setStream(int,%20cli.OutputDevice.Interface)" target="_top"><code class="function">ExecutionContext.Interface.setStream</code></a></td></tr><tr><td align="left">Enabled/disabled stream accessor</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#a5cd3152dd5d07393cb4ff775f8c337cb" target="_top"><code class="function">ExecutionContext::StreamEnabled</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#streamEnabled(int)" target="_top"><code class="function">ExecutionContext.Interface.streamEnabled</code></a></td></tr><tr><td align="left">Enable/disable stream</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#aef973dee56940366895986e63f276f81" target="_top"><code class="function">ExecutionContext::EnableStream</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#enableStream(int,%20boolean)" target="_top"><code class="function">ExecutionContext.Interface.enableStream</code></a></td></tr><tr><td colspan="3" align="left">Presentation</td></tr><tr><td align="left">Welcome message setting</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#a8778b8def7fbd6df15c9e615530097d4" target="_top"><code class="function">Shell::SetWelcomeMessage</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#setWelcomeMessage(cli.ResourceString)" target="_top"><code class="function">Shell.setWelcomeMessage</code></a></td></tr><tr><td align="left">Bye message setting</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#ae80179cef20af1e277ccec1d78d6b775" target="_top"><code class="function">Shell::SetByeMessage</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#setByeMessage(cli.ResourceString)" target="_top"><code class="function">Shell.setByeMessage</code></a></td></tr><tr><td align="left">Prompt message positioning</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#af4e5a2eaa80d146926bcde65351a3e4d" target="_top"><code class="function">Shell::SetPrompt</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#setPrompt(cli.ResourceString)" target="_top"><code class="function">Shell.setPrompt</code></a></td></tr><tr><td align="left">Error formatting</td><td colspan="2" align="left">Deprecated since version 2.6, use <a class="link" href="#adv.menus.handlers" title="6.2.1. handler - menu elements special features">error handlers</a> instead.</td></tr><tr><td align="left">Help margin accessor</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#a88ecb7b84507a6a0a328bbad2f7dc546" target="_top"><code class="function">Shell::GetHelpMargin</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#getHelpMargin()" target="_top"><code class="function">Shell.getHelpMargin</code></a></td></tr><tr><td align="left">Help offset accessor</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#ab634fad29d7130768a0d035b4b84fa5c" target="_top"><code class="function">Shell::GetHelpOffset</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#getHelpOffset()" target="_top"><code class="function">Shell.getHelpOffset</code></a></td></tr><tr><td colspan="3" align="left">Language settings</td></tr><tr><td align="left">Language setting</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#a3af7157b8ee0980415614fe68a84fe5c" target="_top"><code class="function">ExecutionContext::SetLang</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#setLang(int)" target="_top"><code class="function">ExecutionContext.Interface.setLang</code></a></td></tr><tr><td align="left">Language access</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#a17c4b76a71977d05f72b6e8b54dfb5a1" target="_top"><code class="function">ExecutionContext::GetLang</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#getLang()" target="_top"><code class="function">ExecutionContext.Interface.getLang</code></a></td></tr><tr><td colspan="3" align="left">Beep settings</td></tr><tr><td align="left">Beep configuration setting</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#a254d057dcc0dfe1a2373bdb2b9e0bb2f" target="_top"><code class="function">ExecutionContext::SetBeep</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#setBeep(boolean)" target="_top"><code class="function">ExecutionContext.Interface.setBeep</code></a></td></tr><tr><td align="left">Beep configuration access</td><td align="left"><a class="ulink" href="../doxygen/html/classExecutionContext.html#af30a9621e3b3aaf3a4c11d2283697a38" target="_top"><code class="function">ExecutionContext::GetBeep</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/ExecutionContext.Interface.html#getBeep()" target="_top"><code class="function">ExecutionContext.Interface.getBeep</code></a></td></tr><tr><td colspan="3" align="left">Execution</td></tr><tr><td align="left">Retrieves the current menu (or one of those in the current menu stack)</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#acd89663e4920f82781e067924ebb0d0c" target="_top"><code class="function">Shell::GetCurrentMenu</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#getCurrentMenu(int)" target="_top"><code class="function">Shell.getCurrentMenu</code></a></td></tr><tr><td align="left">Enters a menu</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#afc960160c73e316a462e3dafa76c083e" target="_top"><code class="function">Shell::EnterMenu</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#enterMenu(cli.Menu,%20boolean)" target="_top"><code class="function">Shell.enterMenu</code></a></td></tr><tr><td align="left">Exits the current menu</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#ac155dd1bbf445626efb288e3305d7bcb" target="_top"><code class="function">Shell::ExitMenu</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#exitMenu(boolean)" target="_top"><code class="function">Shell.exitMenu</code></a></td></tr><tr><td align="left">Terminates the shell</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#a3d082082d4a4ee56c6d4e82564ae868b" target="_top"><code class="function">Shell::Quit</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#quit()" target="_top"><code class="function">Shell.quit</code></a></td></tr><tr><td colspan="3" align="left">Basic command access</td></tr><tr><td align="left">Displays help depending on the context of the current line</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#a10d22c619c06ef903ffde6153cf7ec1e" target="_top"><code class="function">Shell::DisplayHelp</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#displayHelp()" target="_top"><code class="function">Shell.displayHelp</code></a></td></tr><tr><td align="left">Prints the working menu</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#a9e18d5399d3855c50f1d54015e09bc86" target="_top"><code class="function">Shell::PrintWorkingMenu</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#printWorkingMenu()" target="_top"><code class="function">Shell.printWorkingMenu</code></a></td></tr><tr><td align="left">Cleans the screen</td><td align="left"><a class="ulink" href="../doxygen/html/classShell.html#a6b6751262f2ee8f36302902747ed56a2" target="_top"><code class="function">Shell::CleanScreen</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Shell.html#cleanScreen(boolean)" target="_top"><code class="function">Shell.cleanScreen</code></a></td></tr><tr><td colspan="3" align="left">Debug</td></tr><tr><td align="left">Configuration menu enabling</td><td align="left"><a class="ulink" href="../doxygen/html/classCli.html#afcef4a4232b6a21d8a6262adb51b8b49" target="_top"><code class="function">Cli::EnableConfigMenu</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Cli.html#enableConfigMenu(boolean)" target="_top"><code class="function">Cli.enableConfigMenu</code></a></td></tr><tr><td align="left">Configuration menu enabled status</td><td align="left"><a class="ulink" href="../doxygen/html/classCli.html#a2dba8bf5e11a92c68324cf77c59413a2" target="_top"><code class="function">Cli::IsConfigMenuEnabled</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/Cli.html#isConfigMenuEnabled()" target="_top"><code class="function">Cli.isConfigMenuEnabled</code></a></td></tr></tbody></table></div></div><br class="table-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        You may notice that a couple of the features above are directly available from the base <code class="classname">ExecutionContext</code>,
        and not only from the <code class="classname">Shell</code> class.
        Indeed, the generic <code class="classname">ExecutionContext</code> class, new in version 2.8,
        gathers many useful features, that were implemented in the <code class="classname">Shell</code> class in former versions,
        but for any kind of <a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">execution context</a> now.
        </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.traces"></a>6.4. Traces</h3></div></div></div><p>
        The CLI library has an internal traces system.
        All traces are attached to a class of traces.
        By the way, you can control which traces have to be displayed thanks to the traces class filter.
        When compiled in debug, the CLI library natively includes a traces menu to see and change this filter.
        </p><p>
        The <code class="classname">cli::Traces</code> and <code class="classname">cli::TraceClass</code> classes
        are defined in <code class="filename">cli/traces.h</code>, which is available to you.
        The traces system can be accessed through the singleton <code class="function">cli::GetTraces</code>.
        This gives you the opportunity to use it to control the trace filter
        through the <code class="function">cli::Traces::SetFilter</code> and <code class="function">cli::Traces::SetAllFilter</code> methods.
        You may also use it for your own traces through the <code class="function">cli::Traces::Trace</code> method.
        </p><p>
        <code class="classname">cli::Traces</code> uses an output device that defaults to stderr.
        You may change this device through the <code class="function">cli::Traces::SetStream</code> method,
        and redirect traces to a file for instances.
        Changing this device for the null device is a way to disable all traces.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The io_device unit test gives an example of traces redirection to a file.
        </div>.

    </div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.iodevices"></a>6.5. Define your own input/output device</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="adv.iodevices.provided"></a>6.5.1. Input/output devices provided by the CLI library</h4></div></div></div><p>
            The CLI library has generic classes defining input/output device interfaces:
            <code class="classname">cli::OutputDevice</code>, <code class="classname">cli::IODevice</code> and <code class="classname">cli::NonBlockingIODevice</code>.
            The CLI library gives several implementations of these generic classes:
                </p><div class="informalfigure"><a name="fig.iodevices"></a><div class="mediaobject"><img src="../doxygen/html/classOutputDevice__inherit__graph.png" alt="Input/output devices class hierarchy."><div class="caption">Input/output devices class hierarchy</div></div></div><p>
            </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="classname">cli::Console</code></span></dt><dd>Console input/output device.</dd><dt><span class="term"><code class="classname">cli::InputFileDevice</code></span></dt><dd>Reading from a file can be useful for replaying scripts for instance.</dd><dt><span class="term"><code class="classname">cli::IOMux</code></span></dt><dd>Input and output can be multiplexed thanks to this class.
                    More information is available in the corresponding <a class="link" href="#adv.IOMux" title="6.6. Input / output multiplexer device">section</a>.</dd><dt><span class="term"><code class="classname">cli::SingleCommand</code></span></dt><dd>Single command device object.
                    This device allows you define a single command line
                    and have it executed.</dd><dt><span class="term"><code class="classname">cli::TelnetConnection</code></span></dt><dd>Telnet connection input/output device.
                    <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                    The telnet protocol is not fully managed for the moment.
                    Use simple TCP client connections for now
                    with <span class="application">teraterm</span> for instance.
                    </div></dd><dt><span class="term"><code class="classname">cli::OutputFileDevice</code></span></dt><dd>Redirect output to a file thanks to this device.</dd><dt><span class="term"><code class="classname">cli::StringDevice</code></span></dt><dd>Output to a string object.
                    This device can be useful for unit-test among others.</dd></dl></div><p>
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            The <code class="classname">ui::Text</code> class is a specific class dedicated to
            <a class="link" href="#ui.more" title="5.7. More"><code class="classname">ui::More</code></a> and <a class="link" href="#ui.less" title="5.8. Less"><code class="classname">ui::Less</code></a> management.
            Therefore it is not discussed in this section.
            </div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="adv.iodevices.inherit"></a>6.5.2. Inherit from generic input/output devices interfaces</h4></div></div></div><p>
            You may need some support for other devices (such as RS232 for instance).
            Feel free to create new classes inheriting from generic input/output device interfaces, and implement what you need.
            </p><p>
            When inheriting from <code class="classname">cli::OutputDevice</code>, <code class="classname">cli::IODevice</code> or <code class="classname">cli::NonBlockingIODevice</code>,
            the following handlers must/may be overridden:

                </p><div class="table"><a name="table.OutputDevice"></a><p class="title"><b>Table 2. Output device handlers</b></p><div class="table-contents"><p>
                    See <a class="ulink" href="../doxygen/html/classOutputDevice.html" target="_top"><code class="classname">cli::OutputDevice</code></a> for C++,
                    <a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html" target="_top"><code class="classname">cli.OutputDevice.Java</code></a> for Java.
                    </p><table summary="Output device handlers" border="1"><colgroup><col align="left" class="cpp"><col align="left" class="java"><col align="left" class="mandatory"><col align="left" class="description"></colgroup><thead><tr><th align="left">C++</th><th align="left">Java</th><th align="left"> </th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a class="ulink" href="../doxygen/html/classOutputDevice.html#0c933e5b3de0d0e48dcbd4ba56b7f147" target="_top"><code class="function">OpenDevice</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html#openDevice()" target="_top"><code class="function">openDevice</code></a></td><td align="left">Mandatory</td><td align="left">
                                <p>
                                Device opening handler.
                                This is the place for device initializations.
                                </p>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classOutputDevice.html#4a3680bb550c7cb6b08f1cef6124f3c2" target="_top"><code class="function">CloseDevice</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html#closeDevice()" target="_top"><code class="function">closeDevice</code></a></td><td align="left">Mandatory</td><td align="left">
                                <p>
                                Device closure handler.
                                Free resources allocated in <code class="function">OpenDevice</code>.
                                </p>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classOutputDevice.html#a4653710e8f6f3d9bd53cdfec4fe253d" target="_top"><code class="function">PutString</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html#put(java.lang.String)" target="_top"><code class="function">put</code></a></td><td align="left">Mandatory</td><td align="left">
                                <p>
                                Character output handler.
                                </p>

                                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                                Please note the <span class="command"><strong>check io-device outputs</strong></span> command in the <span class="command"><strong>cli-config</strong></span> menu in debug mode.
                                This commands tries to output every <span class="type">char</span> from range 0 to 255.
                                This routine may help you to integrate your output device implementation.
                                </div>

                                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                                Since version 2.3, the <code class="classname">cli::OutputDevice</code> basic class does not manage an "end of line" pattern anymore.
                                It is up to the sub-classes to trap <code class="code">'\n'</code> characters in the <code class="function">PutString</code> handler,
                                and do the appropriate stuff at this time.
                                </div>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classOutputDevice.html#4b4cc34728972042f3a79e5e63178b7b" target="_top"><code class="function">Beep</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html#beep()" target="_top"><code class="function">beep</code></a></td><td align="left">Optional</td><td align="left">
                                <p>
                                Beep handler.
                                Default implementation outputs a '\a' character.
                                </p>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classOutputDevice.html#04c4210231e603e0d398698885a9c5de" target="_top"><code class="function">CleanScreen</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html#cleanScreen()" target="_top"><code class="function">cleanScreen</code></a></td><td align="left">Optional</td><td align="left">
                                <p>
                                Clean screen handler.
                                Default implementation prints out 50 blank lines.
                                </p>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classOutputDevice.html#3cec03b49e12d20ee63f5ca9037f67da" target="_top"><code class="function">GetScreenInfo</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html#getScreenInfo()" target="_top"><code class="function">getScreenInfo</code></a></td><td align="left">Optional</td><td align="left">
                                <p>
                                Screen information:
                                </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Dimensions: width and height,</li><li class="listitem">True cls characteristic:
                                            whether the device implements an efficient "clean screen" feature,</li><li class="listitem">Line wrapping characteristic:
                                            true when the device automatically adds a new line when the cursor reaches the right border of the screen.</li></ul></div><p>
                                </p>

                                <p>
                                Default implementation indicates a 80x20 screen with no true "clean screen" feature nor line wrapping.
                                Thus, overriding this handler is optional, but you'd better do it,
                                especially if you intend to use <code class="classname">ui::More</code> or <code class="classname">ui::Less</code> objects.
                                </p>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classOutputDevice.html#3be4874ce99500243bfaeada5091f3f4" target="_top"><code class="function">WouldOutput</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/OutputDevice.Java.html#wouldOutput(cli.OutputDevice.Interface)" target="_top"><code class="function">wouldOutput</code></a></td><td align="left">Optional</td><td align="left">
                                <p>
                                Stack overflow protection.
                                Determines whether the current device would output the given device in any way.
                                Default implementation checks whether CLI_Device is the self device.
                                </p>

                                <p>
                                If you implement output redirection, don't forget override and call the <code class="function">WouldOutput</code> handler,
                                like <code class="classname">cli::IOMux</code> does.
                                This method has been designed to improve consistency, and prevent stack overflow
                                because of possible infinite loop of calls on character output.
                                </p>
                            </td></tr></tbody></table></div></div><p><br class="table-break">

                </p><div class="table"><a name="table.IODevice"></a><p class="title"><b>Table 3. Input device handlers</b></p><div class="table-contents"><p>
                    See <a class="ulink" href="../doxygen/html/classIODevice.html" target="_top"><code class="classname">cli::IODevice</code></a> for C++,
                    <a class="ulink" href="../javadoc/html/cli/IODevice.Java.html" target="_top"><code class="classname">cli.IODevice</code></a> for Java.
                    </p><table summary="Input device handlers" border="1"><colgroup><col align="left" class="cpp"><col align="left" class="java"><col align="left" class="mandatory"><col align="left" class="description"></colgroup><thead><tr><th align="left">C++</th><th align="left">Java</th><th align="left"> </th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a class="ulink" href="../doxygen/html/classIODevice.html#7bafac5c500746f742aa289f33e38feb" target="_top"><code class="function">GetKey</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/IODevice.Java.html#getKey()" target="_top"><code class="function">getKey</code></a></td><td align="left">Mandatory</td><td align="left">
                                <p>
                                Input key capture handler (blocking call).
                                Base implementation provides regular conversions from <span class="type">char</span> to <span class="type">cli::KEY</span> types.
                                </p>

                                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                                Please note the <span class="command"><strong>check io-device</strong></span> command in the <span class="command"><strong>cli-config</strong></span> menu in debug mode.
                                This command asks you to press each character managed by the library, in order to make a complete inventory.
                                This routine, with the use of traces (see <a class="link" href="#adv.traces" title="6.4. Traces">Traces</a>),
                                may help you to integrate your input device implementation.
                                </div>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classIODevice.html#803bd02bf68fcbb8b40b50548b1cfb8b" target="_top"><code class="function">GetLocation</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/IODevice.Java.html#getLocation()" target="_top"><code class="function">getLocation</code></a></td><td align="left">Optional</td><td align="left">
                                <p>
                                Input location.
                                Return a text indicating where the location of the last character input.
                                Useful when developing compiler applications.
                                </p>
                            </td></tr><tr><td align="left"><a class="ulink" href="../doxygen/html/classIODevice.html#d03f2900ba78cac1f7e7ba53633ec607" target="_top"><code class="function">WouldInput</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/IODevice.Java.html#wouldInput(cli.IODevice.Interface)" target="_top"><code class="function">wouldInput</code></a></td><td align="left">Optional</td><td align="left">
                                <p>
                                Stack overflow protection.
                                Determines whether the current device would input the given device in any way.
                                Default implementation checks whether CLI_Device is the self device.
                                </p>

                                <p>
                                If you implement input redirection, don't forget override and call the <code class="function">WouldInput</code> handler,
                                like <code class="classname">cli::IOMux</code> does.
                                This method has been designed to improve consistency,
                                and prevent stack overflow because of possible infinite loop of calls on character input.
                                </p>
                            </td></tr></tbody></table></div></div><p><br class="table-break">

                </p><div class="table"><a name="table.NonBlockingIODevice"></a><p class="title"><b>Table 4. Non blocking device handlers</b></p><div class="table-contents"><p>
                    See <a class="ulink" href="../doxygen/html/classNonBlockingIODevice.html" target="_top"><code class="classname">cli::NonBlockingIODevice</code></a> for C++,
                    <a class="ulink" href="../javadoc/html/cli/NonBlockingIODevice.Java.html" target="_top"><code class="classname">cli.NonBlockingIODevice</code></a> for Java.
                    See also <a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">Non blocking execution</a> section for a specific explanation of non blocking devices.
                    </p><table summary="Non blocking device handlers" border="1"><colgroup><col align="left" class="cpp"><col align="left" class="java"><col align="left" class="mandatory"><col align="left" class="description"></colgroup><thead><tr><th align="left">C++</th><th align="left">Java</th><th align="left"> </th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a class="ulink" href="../doxygen/html/classNonBlockingIODevice.html#e7f95aa8e13de4a2b4a271da01b19db2" target="_top"><code class="function">OnKey</code></a></td><td align="left"><a class="ulink" href="../javadoc/html/cli/NonBlockingIODevice.Java.html#onKey(int)" target="_top"><code class="function">onKey</code></a></td><td align="left">Optional</td><td align="left">
                                
                                <p>
                                Handler to call in order to push non blocking keys for processing.
                                </p>
                            </td></tr></tbody></table></div></div><p><br class="table-break">

                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
                <code class="function">NonBlockingIODevice::WaitForKeys</code> is deprecated since version 2.8.
                </p><p>
                UI controls were added in version 2.7, but they did not fully support non blocking executions at first,
                that's the reason why a <code class="function">NonBlockingIODevice::WaitForKeys</code> method had been added then.
                </p><p>
                Thanks to the creation of the <a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">execution context classes</a> classes in version 2.8,
                shells and <a class="link" href="#ui" title="5. UI controls">UI controls</a> now behave the same.
                There was no more reason for the <code class="function">NonBlockingIODevice::WaitForKeys</code> method to be,
                that's the reason why it has been removed and has no existence out of version 2.7.
                </p></div><p>
            </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.IOMux"></a>6.6. Input / output multiplexer device</h3></div></div></div><p>
        Considering the input device could be not the same all along CLI execution,
        I have created an input / output multiplexer device.
        Thus, this kind of device allows you to mix several input devices
        and redirect outputs to other devices.
        </p><p>
        This device may seem complex at first.
        It can be useful however to create simple compilers as described in the <a class="link" href="#adv.compilers" title="6.12. Making compilers">section after</a>.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.quit"></a>6.7. Thread-safe termination (deprecated)</h3></div></div></div><p>
        Thanks to real improvements of <a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">non blocking executions</a>
        with the addition of <a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">execution contexts</a>,
        the <code class="function">cli::Shell::QuitThreadSafe</code> method has been deprecated and even removed in version 2.8.
        Indeed, if you need to terminate a CLI execution from external events,
        it is far much better to make it work in a non blocking mode.
        This way, it can remain in a single main thread, without the threat of threading border effects.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.non-blocking"></a>6.8. Non blocking execution</h3></div></div></div><p>
        The basic integration of the CLI is to have the shell running its main loop in the main thread,
        waiting for the input device to return characters, thanks to the blocking call <code class="function">cli::IODevice::GetKey</code>.
        </p><p>
        This method is fast, but not convenient in various situations:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
            When the integration takes place in a mono-thread application (such as Windows MFC for instance).
            Such kind of applications is usually not designed to safely manage threading and access concurrency.
            Thus creating a thread for a blocking CLI to run in it is source of troubles.
        </li><li class="listitem">
            When the CLI needs to be stopped from external events.
            Unless you have developped your <a class="link" href="#adv.iodevices.inherit" title="6.5.2. Inherit from generic input/output devices interfaces">own input/output</a>
            and made something special for that,
            pretty sure the CLI will be blocked waiting for a single character when you actually need to stop it.
        </li></ul></div><p>
        That's the reason why a "non blocking" execution mode has been developed.
        </p><p>
        It is available by simply giving a <code class="classname">cli::NonBlockingIODevice</code> input device to the shell for its execution.
        It is up to you to:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Inherit from this abstract class (see <a class="link" href="#adv.iodevices" title="6.5. Define your own input/output device">Define your own input/output device</a>),</li><li class="listitem">Have your characters being trapped by the application,</li><li class="listitem">Push them to the shell thanks to the <code class="function">cli::NonBlockingIODevice::OnKey</code> method.</li></ul></div><p>
        </p><div class="example"><a name="eg.non-blocking"></a><p class="title"><b>Example 35. Non blocking execution</b></p><div class="example-contents">
            The following Java example illustrates the use case when using a non blocking device:
<pre class="programlisting">
cli.Cli cli_Cli = new MyCli();
cli.Shell cli_Shell = new cli.Shell(cli_Cli);
MyNonBlockingIODevice cli_Device = new MyNonBlockingIODevice(); // extends cli.NonBlockingIODevice

// Since cli_Device is a non blocking device, the following call does not block the execution thread.
cli_Shell.run(cli_Device);
// cli_Shell is still running at this point!

// Let's push characters...
cli_Device.onKey(cli.OutputDevice.KEY_q);
cli_Device.onKey(cli.OutputDevice.KEY_u);
cli_Device.onKey(cli.OutputDevice.KEY_i);
cli_Device.onKey(cli.OutputDevice.KEY_t);
cli_Device.onKey(cli.OutputDevice.ENTER);
// Since the 'quit' command has been pushed, cli_Shell is not running anymore at this point!
</pre></div></div><br class="example-break"><p>
        Regarding <a class="link" href="#ui" title="5. UI controls">UI controls</a>,
        in non blocking mode, you have to rely on the <code class="classname">ExecutionResult</code> interface in order to be notified when their execution is done
        (see <a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">Execution contexts</a>).
        </p><div class="example"><a name="eg.non-blocking-ui"></a><p class="title"><b>Example 36. Non blocking execution and UI controls</b></p><div class="example-contents">
            Non blocking execution Java code illustration below,
            same as <a class="link" href="#eg.non-blocking" title="Example 35. Non blocking execution">previous example</a>,
            but for UI controls:
<pre class="programlisting">
final MyNonBlockingIODevice cli_Device = new MyNonBlockingIODevice(); // extends cli.NonBlockingIODevice
final cli.ui.Line ui_Line = new cli.ui.Line(cli_Shell, "", 0, 1024);
cli_Device.put("Enter line: ");
ui_Line.watchResult(
    new cli.ExecutionResult() {
        // This method will be called when the control is done
        protected void onResult(cli.ExecutionContext.Interface CLI_Context) {
            cli_Device.put("End of execution: ").put(ui_Line.getLine()).endl();
        }
    }
);
ui_Line.run();
cli_Device.onKey(cli.OutputDevice.KEY_h);
cli_Device.onKey(cli.OutputDevice.KEY_e);
cli_Device.onKey(cli.OutputDevice.KEY_l);
cli_Device.onKey(cli.OutputDevice.KEY_l);
cli_Device.onKey(cli.OutputDevice.KEY_o);
cli_Device.onKey(cli.OutputDevice.ENTER);
// "End of execution: hello" printed out there
</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.exec-ctx"></a>6.9. Execution contexts</h3></div></div></div><p>
        Generic execution contexts have been added in version 2.8.
        They consist in something that manages:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">a set of input/output devices,</li><li class="listitem">settings: language, beep...,</li><li class="listitem">input character processing.</li></ul></div><p>
        It basically corresponds to what the <code class="classname">Shell</code> does, but also <a class="link" href="#ui" title="5. UI controls">UI controls</a>,
        and possibly something you could define for your own needs.
        This feature is basically implemented with the <code class="classname">ExecutionContext</code> and <code class="classname">ExecutionResult</code> classes.
        </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="adv.exec-ctx.input-char"></a>6.9.1. Input character processing</h4></div></div></div><p>
            Input character processing is implemented through the <code class="function">ExecutionContext::Run</code> method.
            It may be either a blocking or a non blocking call depending on the type of input/output device given.
            </p><p>
            The following flow chart illustrates how it works for a regular blocking call execution,
            (i.e. when the input/output device is a direct <code class="classname">IODevice</code>-derived class):
                </p><div class="informalfigure"><a name="fig.exec-ctx.blocking-call"></a><div class="mediaobject"><img src="../doxygen/html/inline_mscgraph_1.png" alt="Execution contexts: blocking call executions flow chart."><div class="caption">Execution contexts: blocking call execution flow chart</div></div></div><p>
            </p><p>
            As discussed in the <a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">Non blocking execution</a> section, it also supports non blocking call executions
            (i.e. when the input/output device is a <code class="classname">NonBlockingIODevice</code>).
            In that case, the <code class="classname">ExecutionResult</code> allows one to retrieve execution results of <code class="classname">ExecutionContext</code> once they are done,
            as shown in the <a class="link" href="#eg.non-blocking-ui" title="Example 36. Non blocking execution and UI controls">Non blocking execution and UI controls</a> example.
            The following flow chart illustrates a non blocking call execution:
                </p><div class="informalfigure"><a name="fig.exec-ctx.non-blocking-call"></a><div class="mediaobject"><img src="../doxygen/html/inline_mscgraph_2.png" alt="Execution contexts: non blocking call executions flow chart."><div class="caption">Execution contexts: non blocking call execution flow chart</div></div></div><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="adv.exec-ctx.top-child"></a>6.9.2. Top and child execution contexts</h4></div></div></div><p>
            Execution contexts can be launched within the execution of another execution context.
            <a class="link" href="#ui" title="5. UI controls">UI controls</a> basically run within the context of a <code class="classname">Shell</code> for example.
            That's why we talk about top and child execution contexts.
            </p><p>
            Whether it is a top or child execution context depends on the constructor overload you call.
            When no <code class="classname">ExecutionContext</code> reference is given for construction, this is a top execution context.
            When a reference is given, this is a child execution context.
            See the example below for a practical use case.
            </p><div class="example"><a name="eg.exec-ctx.pwd-shell"></a><p class="title"><b>Example 37. <code class="classname">PwdShellContext</code> execution context</b></p><div class="example-contents"><p>
                The CLI library does not intend to provide a fortified implementation for authentications.
                That's the reason why no password is managed with the <code class="classname">Shell</code> class.
                </p><p>
                By the way, here is a <code class="classname">PwdShellContext</code> sample class
                that chain a simple <code class="classname">ui::Password</code> execution with a <code class="classname">Shell</code>.
                </p><pre class="programlisting">
#include "cli/exec_context.h"
#include "cli/ui_password.h"
#include "cli/shell.h"

//! @brief Authentication for a shell access.
class PwdShellContext : public cli::ExecutionContext, public cli::ExecutionResult
{
public:
    //! @brief Constructor.
    PwdShellContext(const cli::Cli&amp; CLI_Cli, const char* const STR_Pwd)
          : cli::ExecutionContext(),                                    // Create top execution context.
            m_tkPwd(256, STR_Pwd), m_uiPwdAttempsLeft(MAX_PWD_ATTEMPTS)
    {
        m_pcliPwd = new cli::ui::Password(*this, true, -1, -1);         // Create password child execution context.
        m_pcliShell = new cli::Shell(*this, CLI_Cli);                   // Create shell child execution context.
    }
    //! @brief Destructor.
    virtual ~PwdShellContext(void) {
        delete m_pcliPwd;
        delete m_pcliShell;
    }
public:
    //! @brief Password control accessor.
    cli::ui::Password&amp; GetPwdControl(void) { return *m_pcliPwd; }
    //! @brief Shell accessor.
    cli::Shell&amp; GetShell(void) { return *m_pcliShell; }
protected:
    //! @brief OnStartExecution(): start the password control.
    virtual const bool OnStartExecution(void) {
        GetStream(cli::OUTPUT_STREAM) &lt;&lt; "Enter password: ";
        WatchResult(*m_pcliPwd);
        m_pcliPwd-&gt;Run();
        return true;
    }
    //! @brief Receives notifications when a child execution context is done.
    virtual void OnResult(const cli::ExecutionContext&amp; CLI_ExecutionContext) {
        if (IsRunning()) {
            // When this is a notification from the password control...
            if (&amp; CLI_ExecutionContext == m_pcliPwd) {
                if (m_pcliPwd-&gt;GetbExecResult()) {
                    if (m_uiPwdAttempsLeft &gt; 0) {
                        // Decrement the password attempts left at first.
                        m_uiPwdAttempsLeft --;
                        if (m_pcliPwd-&gt;GetPassword() == m_tkPwd) {
                            // Password OK: restore the password attempts left and run the shell.
                            m_uiPwdAttempsLeft = MAX_PWD_ATTEMPTS;
                            WatchResult(*m_pcliShell);
                            m_pcliShell-&gt;Run();
                            return;
                        } else {
                            // Wrong password
                            if (m_pcliPwd-&gt;GetPassword().IsEmpty()) {
                                m_uiPwdAttempsLeft ++;
                            } else {
                                GetStream(cli::ERROR_STREAM) &lt;&lt; "Wrong password!" &lt;&lt; cli::endl;
                            }
                            if (m_uiPwdAttempsLeft &gt; 0) {
                                // Let the user enter his password again.
                                PwdShellContext::OnStartExecution();
                                return;
                            }
                        }
                    }
                }
            }
            // Default behaviour.
            ExecutionContext::StopExecution();
        }
    }
    //! @brief OnStopExecution(): called when either the user has typed too many wrong passwords, or when the shell is done.. */
    virtual const bool OnStopExecution(void) { return true; }
    //! @brief OnKey(): should not happen.
    virtual void OnKey(const cli::KEY E_Key) {}
private:
    cli::ui::Password* m_pcliPwd;
    cli::Shell* m_pcliShell;
    cli::tk::String m_tkPwd;
    enum { MAX_PWD_ATTEMPTS = 3 };
    unsigned int m_uiPwdAttempsLeft;
};

</pre><p>
                Same thing in Java:
                </p><pre class="programlisting">
/** Authentication for a shell access. */
class PwdShellContext extends cli.ExecutionContext.Java
{
    /** Constructor. */
    public PwdShellContext(cli.Cli CLI_Cli, String J_Pwd) {
        super();                                            // Create top execution context.
        m_jPwd = J_Pwd;
        m_cliPwd = new cli.ui.Password(this, true, -1, -1); // Create password child execution context.
        m_cliShell = new cli.Shell(this, CLI_Cli);          // Create shell child execution context.
        m_cliResult = new PwdShellResult();
        m_iPwdAttempsLeft = MAX_PWD_ATTEMPTS;
    }
    /** Password control accessor. */
    public cli.ui.Password getPwdControl() { return m_cliPwd; }
    /** Shell accessor. */
    public cli.Shell getShell() { return m_cliShell; }
    /** onStartExecution(): start the password control. */
    protected boolean onStartExecution() {
        getStream(cli.ExecutionContext.OUTPUT_STREAM).put("Enter password: ");
        m_cliResult.watchResult(m_cliPwd);
        m_cliPwd.run();
        return true;
    }
    /** onStopExecution(): called when either the user has typed too many wrong passwords, or when the shell is done.. */
    protected boolean onStopExecution() { return true; }
    /** onKey(): should not happen. */
    protected void onKey(int E_Key) {}

    /** Receives notifications when a child execution context is done. */
    private class PwdShellResult extends cli.ExecutionResult {
        protected void onResult(cli.ExecutionContext.Interface CLI_ExecutionContext) {
            if (isRunning()) {
                // When this is a notification from the password control...
                if (CLI_ExecutionContext == m_cliPwd) {
                    if (m_cliPwd.getbExecResult()) {
                        if (m_iPwdAttempsLeft &gt; 0) {
                            // Decrement the password attempts left at first.
                            m_iPwdAttempsLeft --;
                            if (m_cliPwd.getPassword().equals(m_jPwd)) {
                                // Password OK: restore the password attempts left and run the shell.
                                m_iPwdAttempsLeft = MAX_PWD_ATTEMPTS;
                                m_cliResult.watchResult(m_cliShell);
                                m_cliShell.run();
                                return;
                            } else {
                                // Wrong password
                                if (m_cliPwd.getPassword().length() &lt;= 0) {
                                    m_iPwdAttempsLeft ++;
                                } else {
                                    getStream(cli.ExecutionContext.ERROR_STREAM).put("Wrong password!").endl();
                                }
                                if (m_iPwdAttempsLeft &gt; 0) {
                                    // Let the user enter his password again.
                                    onStartExecution();
                                    return;
                                }
                            }
                        }
                    }
                }
                // Default behaviour.
                stopExecution();
            }
        }
    }

    private final int MAX_PWD_ATTEMPTS = 3;
    private final String m_jPwd;
    private final cli.ui.Password m_cliPwd;
    private final cli.Shell m_cliShell;
    private final PwdShellResult m_cliResult;
    private int m_iPwdAttempsLeft;
}

</pre></div></div><br class="example-break"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.dimension"></a>6.10. Embedded integration and memory management</h3></div></div></div><p>
        When integrating the CLI in an embedded context, memory considerations become a critical point.
        </p><p>
        The library basically uses the STL library for strings, queues and maps basic objects.
        But in an embedded integration, it is usually preferred not to use STL at all, because the memory is not known to be safely managed.
        That's the reason why an <span class="emphasis"><em>inner</em></span> toolkit implement is provided with the CLI library.
        This toolkit, enabled through the <code class="varname">CLI_NO_STL</code> compilation directive,
        provides an implementation of strings, queues and maps with a limit of memory extension.
        </p><p>
        Eventually, you may also have a look at the header file <code class="filename">constraints.h</code>.
        This header defines a set of constants that are overridable at compile time.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.pch"></a>6.11. Pre-compiled headers</h3></div></div></div><p>
        C++ CLI is ready for pre-compiled headers.
        Every CLI source starts its inclusions with:
            </p><pre class="programlisting">#include "cli/pch.h"</pre><p>
        A default empty <code class="filename">cli/pch.h</code> is provided with C++ CLI includes,
        so that builds work on even though pre-compiled headers are not set up.
        </p><p>
        I you wish to use pre-compiled headers, I advise you not to modify the header provided with the library.
        Indeed, if you modify that header, then when you upgrade the CLI library with later versions, you may loose your changes by the way.
        You'd better create your own <code class="filename">cli/pch.h</code> somewhere by your own sources,
        and configure include paths so that your <code class="filename">cli/pch.h</code> file is included before the one provided by the library.
        Then include <code class="filename">cli/pch.h</code> in your pre-compiled source object to finalize pre-compilation settings.
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        As far as the CLI library in its default configuration uses the Standard Library headers, pre-compiled headers really fastens your builds.
        </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.compilers"></a>6.12. Making compilers</h3></div></div></div><p>
        The CLI library can be used to make out compilers of simple syntaxes.
        I'm used to combine the <code class="classname">cli::InputFileDevice</code> class to read from files,
        and the <code class="classname">cli::IOMux</code> class to read from a set of files one after the other.
        </p><p>
        The <code class="classname">cli::InputFileDevice</code> provides two methods very useful in that case:
        </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="function">EnableSpecialCharacters</code></span></dt><dd>Makes the <code class="classname">cli::InputFileDevice</code> object enable or disable special characters reading.
                When the special characters are disabled, tabulations will be understood like spaces, interrogation dots will be escaped...
                which is more convenient for a compiler implementation.</dd><dt><span class="term"><code class="function">GetLocation</code></span></dt><dd>When an error occurs, this method can be called to retrieve the current position of reading in the input file.</dd></dl></div><p>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        The <a class="ulink" href="http://alexis.royer.free.fr/Watch" target="_top">Watch project</a> does implement such kind of design.
        </div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adv.noxmlres"></a>6.13. Without the XML resource file</h3></div></div></div><p>
        Some of you could find the library interesting for what it already implements,
        but not the XML resource file, too limitative maybe.
        </p><p>
        Indeed the XML resource file aims to facilitate and fasten the development.
        But you could plan using library objects directly,
        and maybe inherit from them in order to improve the stuff.
        </p><p>
        Well... Up to you!
        </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="faq"></a>7. Frequently Asked Questions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q020"></a>7.1. I need to repeat a same set of commands. How can I do?</h3></div></div></div><p>
            <a class="link" href="#xmlres.tag" title="4.6. tag - How to make jumps in the syntax tree"><code class="sgmltag-element">tag</code> elements</a> allow you to reuse command line patterns within in a same command line,
            but they do not work across different menus.
            </p><p>
            By the way, repeating a same set of commands in different menus is a regular expectation.
            You can use XML inclusions for that.
            </p><div class="example"><a name="eg.include.entity"></a><p class="title"><b>Example 38. XML inclusions: external entities</b></p><div class="example-contents"><p>
                This example shows how to implement XML inclusions with external entities.
                </p><p>
                Define a <code class="filename">top.xml</code> cli XML file like this:
</p><pre class="programlisting">
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;!DOCTYPE cli [
 &lt;!ENTITY child SYSTEM "child.xml"&gt;
]&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="top"&gt;
 &lt;keyword string="menu1"&gt;
  &lt;endl&gt;
   &lt;menu name="menu1"&gt;
    &amp;child;
   &lt;/menu&gt;
  &lt;/endl&gt;
 &lt;/keyword&gt;
 &lt;keyword string="menu2"&gt;
  &lt;endl&gt;
   &lt;menu name="menu2"&gt;
    &amp;child;
   &lt;/menu&gt;
  &lt;/endl&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre><p>
                </p><p>
                Define a <code class="filename">child.xml</code> cli XML file like this:
</p><pre class="programlisting">
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;keyword string="k1"&gt;
 &lt;endl&gt;&lt;/endl&gt;
&lt;/keyword&gt;
</pre><p>
                </p><p>
                Then build the full XML file with the following command:
                </p><pre class="programlisting">xmllint --dropdtd --noent top.xml &gt; full.xml</pre><p>
                </p></div></div><br class="example-break"><div class="example"><a name="eg.include.xinclude"></a><p class="title"><b>Example 39. XML inclusions: <a class="ulink" href="http://www.w3.org/TR/xinclude/" target="_top">XInclude</a></b></p><div class="example-contents"><p>
                This example shows how to implement XML inclusions with <a class="ulink" href="http://www.w3.org/TR/xinclude/" target="_top">XInclude</a>.
                </p><p>
                Define a <code class="filename">top2.xml</code> cli XML file like this:
</p><pre class="programlisting">
&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;cli xmlns="http://alexis.royer.free.fr/CLI" name="top"&gt;
 &lt;keyword string="menu1"&gt;
  &lt;endl&gt;
   &lt;menu name="menu1"&gt;
    &lt;xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="child.xml" parse="xml"/&gt;
   &lt;/menu&gt;
  &lt;/endl&gt;
 &lt;/keyword&gt;
 &lt;keyword string="menu2"&gt;
  &lt;endl&gt;
   &lt;menu name="menu2"&gt;
    &lt;xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="child.xml" parse="xml"/&gt;
   &lt;/menu&gt;
  &lt;/endl&gt;
 &lt;/keyword&gt;
&lt;/cli&gt;
</pre><p>
                </p><p>
                Keep the same <code class="filename">child.xml</code> as for the <a class="link" href="#eg.include.entity" title="Example 38. XML inclusions: external entities">previous example</a>.
                Then build the full XML file with the following command:
                </p><pre class="programlisting">xmllint --xinclude top2.xml &gt; full2.xml</pre><p>
                </p></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q050"></a>7.2. Why the <code class="classname">Shell</code> doesn't come with a timeout for automatic log off?</h3></div></div></div><p>
            The aim of this software is to ease the development of command line interfaces,
            not to provided a high-security shell implementation.
            That's the reason why the <code class="classname">Shell</code> class
            does not provide a password authentication
            nor a timeout feature.
            </p><p>
            It is up to you to implement such kind of functions, depending on your security requirements.
            By the way, I advise you to read through the <a class="link" href="#adv.exec-ctx" title="6.9. Execution contexts">Execution contexts</a> section,
            and its <a class="link" href="#eg.exec-ctx.pwd-shell" title="Example 37. PwdShellContext execution context"><code class="classname">PwdShellContext</code> execution context</a> example.
            Also have a look at non blocking devices,
            in the <a class="link" href="#adv.non-blocking" title="6.8. Non blocking execution">Non blocking execution</a> section,
            which are more suitable to implement timeout aspects.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q100"></a>7.3. Why ain't there a possibility to set a context reference with <code class="classname">Cli</code> objects?</h3></div></div></div><p>
            If I had provided a general member for a context reference in <code class="classname">Cli</code> objects,
            it would have been an opaque pointer of type <span class="type">void*</span>, which I definitely dislike.
            I prefer when objects are accessed through full type accessors, such as singletons, or register databases.
            Or even better, you could make use of member code generation as described in the <a class="link" href="#xmlres.native" title="4.4. cpp, java - Insert target language directly in the resource file"><code class="sgmltag-element">cpp</code>, <code class="sgmltag-element">java</code>
                - Insert target language directly in the resource file</a> section
            in order to declare your own context reference, with getters and setters.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q200"></a>7.4. I can't compile for a 64 bit architecture!</h3></div></div></div><p>
	    Please note at first that a bug around formatting pointer values has been fixed in version 2.8 in <code class="filename">io_device.cpp</code>.
	    </p><p>
            Then, it seems there may be troubles around Java.
	    Here is what Pete Geremia emailed to me after he managed to make it work on a 64 bit architecture (thank you Pete):
                </p><div class="blockquote"><blockquote class="blockquote">I basically added -m32 to c++ compile lines.
                            There is also a requirement to point JAVA_HOME to a 32bit version of Java that is installed on a 64bit box.  (in file cli/java/build/make/_vars.mak)<br>
                            I also fixed some bugs where "jar" was called w/o $JAVA_HOME/bin/ in front of it.
                            This actually caused me a problem because OpenJDK was installed on the box and jar was being used from that distribution.</blockquote></div><p>
            </p><p>
            Now, if you, guys, have some more info, please let me know.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q300"></a>7.5. I can't compile due to the <code class="varname">DELETE</code> symbol with VC++!</h3></div></div></div><p>
            Has far as CLI symbols are all scoped in a <span class="package">cli</span> namespace, I have not specified them with redundant prefixes.
            To my point of view, this is a smart way of organizing C++ code.
            Therefore, the <code class="varname">DELETE</code> symbol is defined as an enum value in the scope of the <span class="package">cli</span> namespace.
            </p><p>
            The compilation error with Visual C++ comes with an abusive VC++ <code class="varname">DELETE</code> define directive in Windows headers.
            This define is useless in CLI sources, therefore I advise to use a <code class="filename">cli/pch.h</code> file
            as described in the <a class="link" href="#adv.pch" title="6.11. Pre-compiled headers">Pre-compiled headers</a> section,
            and undefine the <code class="varname">DELETE</code> symbol in it, after Windows inclusions:
                </p><pre class="programlisting">#undef DELETE</pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q350"></a>7.6. I get a 'curses.h : No such file or directory' while compiling <code class="filename">ncurses_console.cpp</code>!</h3></div></div></div><p>
            First check you have installed the ncurses devel tools as described in section <a class="link" href="#prerequisite" title="2.2. Prerequisite">Prerequisite</a>.
            </p><p>
            If you have already installed the ncurses devel tools, and still have the error,
            check whether your <code class="filename">curses.h</code> header is located in your regular system include path (<code class="filename">/usr/include</code> in general).
            You may notice that it is not exactly in this directory but maybe in a subdirectory.
            I recently faced this problem with my latest Cygwin install.
            You'd then set (or extend) your <code class="varname">CPLUS_INCLUDE_PATH</code> environment variable to the required directory,
            as below for example:
            </p><pre class="programlisting">export CPLUS_INCLUDE_PATH=/usr/include/ncurses</pre><p>
            Then try to rebuild.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q400"></a>7.7. CLI auto-generated source files cause thousands of compilation warnings!</h3></div></div></div><p>
            Indeed, C++ CLI auto-generated source files contain lots of labels and gotos.
            Not all of the labels defined are used with goto statements, which causes all those warnings with most of compilers.
            </p><p>
            You may have noticed the use of the <span class="command"><strong>g++</strong></span> <code class="option">-Wno-unused-label</code> option in the <a class="link" href="#integ.cpp" title="3.2.1. C++ integration">C++ integration</a> section.
            This option can be set specifically for the compilation of CLI generated source file, in order to avoid all those warnings.
            </p><p>
            With VC++, you shall use the following pragma instruction:
                </p><pre class="programlisting">#pragma warning(disable:4102)</pre><p>
            either by putting it in a <code class="filename">cli/pch.h</code> as described in the <a class="link" href="#adv.pch" title="6.11. Pre-compiled headers">Pre-compiled headers</a> section,
            or by using generated code sections as described in the <a class="link" href="#xmlres.native" title="4.4. cpp, java - Insert target language directly in the resource file"><code class="sgmltag-element">cpp</code>, <code class="sgmltag-element">java</code>
                - Insert target language directly in the resource file</a> section.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q600"></a>7.8. I am coming across problems while trying to print onto the CLI console: unwanted indenting, interleaved text...</h3></div></div></div><p>
            The problem must be because you are using standard outputs (<code class="function">printf</code>, <code class="varname">std::cout</code>...),
            while the cli is ran with a <code class="classname">cli::Console</code> device which relies on the ncurses library on Linux platforms.
            Mixing standard and ncurses outputs does not behave correctly.
            </p><p>
            Indeed, you should always use the output and error devices used by your <code class="classname">Cli</code> (and <code class="classname">Shell</code>),
            even in your user code.
            Here is a way of doing it:
</p><pre class="programlisting">
&lt;keyword string="bye"&gt;&lt;help lang="en"&gt;Say goodbye.&lt;/help&gt;
 &lt;endl&gt;&lt;cpp&gt;sayBye(&lt;out/&gt;);&lt;/cpp&gt;&lt;/endl&gt;
&lt;/keyword&gt;
</pre><p>
            Notice the use of <code class="sgmltag-element">out</code> that references the cli/shell output device.
            Could also be <code class="sgmltag-element">err</code> for the error device.
            See <a class="link" href="#eg.output" title="Example 8. Output">Output</a> example.
            </p><p>
            Then:
</p><pre class="programlisting">
void sayBye(const cli::OutputDevice&amp; CLI_Out)
{
    CLI_Out &lt;&lt; "Bye" &lt;&lt; cli::endl;
    CLI_Out &lt;&lt; "Bye Again" &lt;&lt; cli::endl;
}
</pre><p>
            Notice the use of <code class="varname">CLI_Out</code> instead of <code class="varname">std::cout</code>, and the use of <code class="varname">cli::endl</code> instead of <code class="varname">std::endl</code>.
            </p><p>
            By the way, if you ever wish to change that device later on (for telnet input/output for instance, or a serial port...),
            you would just have to change the kind of device given to the <code class="classname">Shell</code> instance for running.
            Here is a sample with file devices:
</p><pre class="programlisting">
void runShellWithFiles()
{
    MyCli cli_MyCli;
    cli::Shell cli_Shell(cli_MyCli);
    cli::OutputFileDevice cli_OutFile("output.log", false);
    cli::InputFileDevice cli_InFile("input.cli", cli_OutFile, false);
    cli_Shell.Run(cli_InFile);
}
</pre><p>
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q650"></a>7.9. The <a class="link" href="#eg.java.init" title="Example 4. Java integration">Java integration</a> sample gets stuck when executed under cygwin!</h3></div></div></div><p>
            The Java implementation relies on a native dynamic library
            which device console is based on <code class="filename">win_console.cpp</code> under cygwin.
            This choice makes your Java programs work without a dependency on <code class="filename">cygwin1.dll</code>,
            which is convenient for applications running in a <span class="application">Windows</span> environment.
            </p><p>
            Latest Cygwin distributions propose the <span class="application">mintty</span> console,
            which works correctly with <code class="filename">ncurses_console.cpp</code>
            but unfortunatley not with <code class="filename">win_console.cpp</code> implementation.
            By the way, if you run the given <span class="command"><strong>java</strong></span> command line in a regular <span class="application">cmd.exe</span> console,
            it works as expected.
                </p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
                Make sure you execute the Java program with a <span class="command"><strong>java</strong></span> version compatible with the one of the <span class="command"><strong>javac</strong></span> you used to compile,
                otherwise you may get "Unsupported major.minor version" errors.
                </div><p>
            </p><p>
            If you want to compile Java programs under cygwin and execute them in the same console as well (devel configuration for example),
            you may launch a <span class="application">cmd.exe</span> console and run the <code class="filename">Cygwin.bat</code> script provided in your cygwin install directory.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q700"></a>7.10. My Console device does not behave nicely!</h3></div></div></div><p>
            I had once noticed strange behaviours with my WinConsole device, through Java execution under cygwin:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">could not ensure the visibility of the cursor when moving it left or right,</li><li class="listitem">could not get the Windows optimized clean screen feature running, but had many blank lines printed out instead,</li><li class="listitem">...</li></ul></div><p>
            I then figured out that it was because I was executing the CLI within the context of a Makefile, launched through <span class="command"><strong>colormake</strong></span>,
            which uses output redirection.
            When using <span class="command"><strong>make</strong></span> directly, no problem anymore.
            </p><p>
            As a matter of fact, if you face non optimal behaviours with <code class="classname">Console</code> devices, please make sure no output redirection is used,
            otherwise console primitives will operate on the pipe and not the console anymore.
            </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="faq.Q500"></a>7.11. Why ain't there regular VC++ memory leak macros in CLI source files?</h3></div></div></div><p>
            The CLI library does not intend to be VC++ specific code, nor Eclipse specific, nor CodeWarrior...
            I do not intend neither to "pollute" the CLI sources with various compiler specific macros.
            That's the reason why regular VC++ memory leak macros are not set in the CLI sources, even guarded by pre-compilation switches.
            </p><p>
            Nevertheless, I've tried to deal with memory leaks so far.
            A special thank to Oleg Smolsky's contribution at this point, for another one detected and fixed.
            Now if you figure out that leaks still remain, up to you to set your macros in the CLI sources for investigations,
            depending on the tool you use: VC++, valgrind...
            I'll be glad to integrate your fixes if you have any.
            </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="outro"></a>8. Conclusion</h2></div></div></div><p>
    Well, that's it for this user guide.
    I hope you enjoyed it.
    Don't hesitate contacting me for any remark or so.
    </p></div></div></body></html>
